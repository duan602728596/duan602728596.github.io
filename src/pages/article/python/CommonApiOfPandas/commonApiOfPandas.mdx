# pandas的常用API

pandas的常用操作方法，便于快速查找。

* 加载数据
  ```python
  df = pd.DataFrame(data)
  ```

* 重命名列
  ```python
  df.rename(columns={
      'a': 'new_a',
      'b': 'new_b',
      'c': 'new_c',
  }, inplace = True)
  ```

* merge数据
  ```python
  merged_df = pd.DataFrame([{ 'id: '1', 'd': 'd_value' }])
  df = pd.merge(df, merged_df, on=['id'], how='left')
  ```

* 合并两个DataFrame
  ```python
  df1 = pd.DataFrame(data1)
  df = pd.concat([df, df1], ignore_index=True)
  ```

* 重新排列列
  ```python
  df = df[['id', 'a', 'b', 'c', 'd']]
  ```

* 添加行
```python
  new_row = pd.Series({
      'id': '32',
      'a': 'a_value',
      'b': 'b_value',
      'c': 'c_value',
      'd': 'd_value',
  })
  df.loc[len(df)] = new_row
  ```

* 添加列
  ```python
  df['e'] = ['e1_value', 'e2_value', 'e3_value']
  ```

* 用apply添加列
  ```python
  def apply_callback(row):
      """为每个列添加新属性"""
      row['f'] = row['e'] + row['c']
      return row

  df = df.apply(apply_callback, axis=1)
  ```

* 替换值
  ```python
  df.replace([np.inf, -np.inf], np.nan, inplace=True) # 删除inf
  ```

* 删除列
  ```python
  df = df.drop(columns=['e', 'c'])
  ```

* 删除指定条件的行
  ```python
  con = df['a'] == 13
  df = df.drop(df[con].index, axis=0)
  ```

* 更新数据
  ```python
  con = df['id'] == '14'
  df.loc[con, 'a'] = 95
  ```

* 指定的index插入数据
  ```python
  insert_value_index = 2
  insert_value_df = pd.DataFrame(value, index=[insert_value_index])
  df = pd.concat([df.loc[:insert_value_index], insert_value_df, df.loc[insert_value_index + 1:]],
                 ignore_index=True)
  ```

* 排序
  ```python
  # 高 -> 低
  sort1_df = df.sort_values(['a'], ascending=False)
  # 低 -> 高
  sort2_df = df.sort_values(['b'])
  ```