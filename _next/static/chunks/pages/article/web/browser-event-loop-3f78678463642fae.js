(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9955],{38925:function(e,n,t){"use strict";t.d(n,{Z:function(){return O}});var o=t(76278),r=t(41322),a=t(84481),i=t(26702),s=t(1558),l=t(94184),c=t.n(l),d=t(82225),u=t(64217),m=t(67294),h=t(96159),p=t(53124),f=t(14747),g=t(67968),v=t(45503);let x=(e,n,t,o,r)=>({backgroundColor:e,border:`${o.lineWidth}px ${o.lineType} ${n}`,[`${r}-icon`]:{color:t}}),b=e=>{let{componentCls:n,motionDurationSlow:t,marginXS:o,marginSM:r,fontSize:a,fontSizeLG:i,lineHeight:s,borderRadiusLG:l,motionEaseInOutCirc:c,alertIconSizeLG:d,colorText:u,paddingContentVerticalSM:m,alertPaddingHorizontal:h,paddingMD:p,paddingContentHorizontalLG:g,colorTextHeading:v}=e;return{[n]:Object.assign(Object.assign({},(0,f.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:`${m}px ${h}px`,wordWrap:"break-word",borderRadius:l,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:a,lineHeight:s},"&-message":{color:u},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${t} ${c}, opacity ${t} ${c},
        padding-top ${t} ${c}, padding-bottom ${t} ${c},
        margin-bottom ${t} ${c}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",paddingInline:g,paddingBlock:p,[`${n}-icon`]:{marginInlineEnd:r,fontSize:d,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:o,color:v,fontSize:i},[`${n}-description`]:{display:"block"}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},j=e=>{let{componentCls:n,colorSuccess:t,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:a,colorWarningBorder:i,colorWarningBg:s,colorError:l,colorErrorBorder:c,colorErrorBg:d,colorInfo:u,colorInfoBorder:m,colorInfoBg:h}=e;return{[n]:{"&-success":x(r,o,t,e,n),"&-info":x(h,m,u,e,n),"&-warning":x(s,i,a,e,n),"&-error":Object.assign(Object.assign({},x(d,c,l,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},w=e=>{let{componentCls:n,iconCls:t,motionDurationMid:o,marginXS:r,fontSizeIcon:a,colorIcon:i,colorIconHover:s}=e;return{[n]:{"&-action":{marginInlineStart:r},[`${n}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:a,lineHeight:`${a}px`,backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${t}-close`]:{color:i,transition:`color ${o}`,"&:hover":{color:s}}},"&-close-text":{color:i,transition:`color ${o}`,"&:hover":{color:s}}}}},y=e=>[b(e),j(e),w(e)];var k=(0,g.Z)("Alert",e=>{let{fontSizeHeading3:n}=e,t=(0,v.TS)(e,{alertIconSizeLG:n,alertPaddingHorizontal:12});return[y(t)]}),_=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>n.indexOf(o)&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>n.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t};let E={success:o.Z,info:s.Z,error:r.Z,warning:i.Z},S=e=>{let{icon:n,prefixCls:t,type:o}=e,r=E[o]||null;return n?(0,h.wm)(n,m.createElement("span",{className:`${t}-icon`},n),()=>({className:c()(`${t}-icon`,{[n.props.className]:n.props.className})})):m.createElement(r,{className:`${t}-icon`})},Z=e=>{let{isClosable:n,prefixCls:t,closeIcon:o,handleClose:r}=e,i=!0===o||void 0===o?m.createElement(a.Z,null):o;return n?m.createElement("button",{type:"button",onClick:r,className:`${t}-close-icon`,tabIndex:0},i):null};var $=e=>{let{description:n,prefixCls:t,message:o,banner:r,className:a,rootClassName:i,style:s,onMouseEnter:l,onMouseLeave:h,onClick:f,afterClose:g,showIcon:v,closable:x,closeText:b,closeIcon:j,action:w}=e,y=_(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),[E,$]=m.useState(!1),C=m.useRef(null),{getPrefixCls:N,direction:T,alert:L}=m.useContext(p.E_),I=N("alert",t),[O,P]=k(I),M=n=>{var t;$(!0),null===(t=e.onClose)||void 0===t||t.call(e,n)},z=m.useMemo(()=>void 0!==e.type?e.type:r?"warning":"info",[e.type,r]),D=m.useMemo(()=>!!b||("boolean"==typeof x?x:!1!==j&&null!=j),[b,j,x]),B=!!r&&void 0===v||v,H=c()(I,`${I}-${z}`,{[`${I}-with-description`]:!!n,[`${I}-no-icon`]:!B,[`${I}-banner`]:!!r,[`${I}-rtl`]:"rtl"===T},null==L?void 0:L.className,a,i,P),A=(0,u.Z)(y,{aria:!0,data:!0});return O(m.createElement(d.ZP,{visible:!E,motionName:`${I}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:g},t=>{let{className:r,style:a}=t;return m.createElement("div",Object.assign({ref:C,"data-show":!E,className:c()(H,r),style:Object.assign(Object.assign(Object.assign({},null==L?void 0:L.style),s),a),onMouseEnter:l,onMouseLeave:h,onClick:f,role:"alert"},A),B?m.createElement(S,{description:n,icon:e.icon,prefixCls:I,type:z}):null,m.createElement("div",{className:`${I}-content`},o?m.createElement("div",{className:`${I}-message`},o):null,n?m.createElement("div",{className:`${I}-description`},n):null),w?m.createElement("div",{className:`${I}-action`},w):null,m.createElement(Z,{isClosable:D,prefixCls:I,closeIcon:b||j,handleClose:M}))}))},C=t(15671),N=t(43144),T=t(32531),L=t(73568);let I=function(e){(0,T.Z)(t,e);var n=(0,L.Z)(t);function t(){var e;return(0,C.Z)(this,t),e=n.apply(this,arguments),e.state={error:void 0,info:{componentStack:""}},e}return(0,N.Z)(t,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e,info:n})}},{key:"render",value:function(){let{message:e,description:n,children:t}=this.props,{error:o,info:r}=this.state,a=r&&r.componentStack?r.componentStack:null,i=void 0===e?(o||"").toString():e;return o?m.createElement($,{type:"error",message:i,description:m.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},void 0===n?a:n)}):t}}]),t}(m.Component);$.ErrorBoundary=I;var O=$},76278:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var o=t(87462),r=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},i=t(93771),s=r.forwardRef(function(e,n){return r.createElement(i.Z,(0,o.Z)({},e,{ref:n,icon:a}))})},26702:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var o=t(87462),r=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},i=t(93771),s=r.forwardRef(function(e,n){return r.createElement(i.Z,(0,o.Z)({},e,{ref:n,icon:a}))})},1558:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var o=t(87462),r=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},i=t(93771),s=r.forwardRef(function(e,n){return r.createElement(i.Z,(0,o.Z)({},e,{ref:n,icon:a}))})},6153:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var o=t(67294),r=t(9008),a=t.n(r),i=t(48726),s=t(38925),l=t(22410),c=t(30755),d=t(67552),u=t.n(d),m=t(85893),h=t(11151);function p(e){var n=u()({pre:"pre",code:"code"},(0,h.ah)(),e.components);return(0,m.jsx)(n.pre,{children:(0,m.jsx)(n.code,{className:"language-javascript",children:"console.log(1);\n\nnew Promise((resolve) => {\n  console.log(2);\n  resolve();\n}).then(() => {\n  console.log(3);\n});\n\nsetTimeout(() => {\n  console.log(4);\n}, 0);\n\nnew Promise((resolve) => {\n  console.log(5);\n  resolve();\n}).then(() => {\n  console.log(6);\n});\n"})})}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u()({},(0,h.ah)(),e.components).wrapper;return n?(0,m.jsx)(n,u()({},e,{children:(0,m.jsx)(p,e)})):p(e)},g=i.Z.Title,v=i.Z.Paragraph,x=function(e){return(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(g,{children:"浏览器事件循环"}),(0,m.jsxs)(v,{children:[(0,m.jsx)("blockquote",{children:"浏览器需要事件循环来协调事件、用户操作、脚本执行、渲染、网络请求等。通过事件循环，浏览器可以利用任务队列来管理任务， 让异步事件非阻塞地执行。每个客户端对应的事件循环是相对独立的。"}),(0,m.jsxs)("blockquote",{children:["浏览器事件循环是以浏览器为宿主环境实现的事件调度，操作顺序如下：",(0,m.jsxs)("ol",{children:[(0,m.jsx)("li",{children:"执行同步代码。"}),(0,m.jsx)("li",{children:"执行一个宏任务（执行栈中没有就从任务队列中获取）。"}),(0,m.jsx)("li",{children:"执行过程中如果遇到微任务，就将它添加到微任务的任务队列中。"}),(0,m.jsx)("li",{children:"宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）。"}),(0,m.jsx)("li",{children:"当前宏任务执行完毕，开始检查渲染，然后渲染线程接管进行渲染。"}),(0,m.jsx)("li",{children:"渲染完毕后，JavaScript 线程继续接管，开始下一个循环。"})]})]})]}),(0,m.jsx)(v,{children:"这是一个经典的题目："}),(0,m.jsx)(f,{}),(0,m.jsx)(v,{children:"输出："}),(0,m.jsx)(c.Z,{type:"text",children:"1\n2\n5\n3\n6\n4"}),(0,m.jsx)(g,{level:2,children:"setTimeout和setInterval"}),(0,m.jsx)(v,{children:"setTimeout和setInterval的运行机制是，将指定的代码移出本次执行，等到下一轮Event Loop时，再检查是否到了指定时间。 如果到了，就执行对应的代码；如果不到，就等到再下一轮Event Loop时重新判断。 这意味着，setTimeout指定的代码，必须等到本次执行的所有代码都执行完，才会执行。"}),(0,m.jsx)(v,{children:"零延迟（Zero delay）并不是意味着回调会立即执行。在零延迟调用setTimeout时，其并不是过了给定的时间间隔后就马上执行回调函数。 其等待的时间基于队列里正在等待的消息数量。也就是说，setTimeout()只是将事件插入了任务队列，必须等到当前代码（执行栈）执行完， 主线程才会去执行它指定的回调函数。要是当前代码耗时很长，有可能要等很久，所以并没有办法保证回调函数一定会在setTimeout()指定的时间执行。"}),(0,m.jsx)(s.Z,{type:"info",message:[(0,m.jsx)("h2",{className:"mb-0 py-[8px] text-[16px]",children:"参考地址："},"cankaodizhi"),(0,m.jsx)("div",{className:"py-[8px]",children:(0,m.jsx)("a",{href:"https://febook.hzfe.org/awesome-interview/book3/browser-event-loop",target:"_blank",rel:"noopener noreferrer",children:"https://febook.hzfe.org/awesome-interview/book3/browser-event-loop"})},"febook"),(0,m.jsx)("div",{className:"py-[8px]",children:(0,m.jsx)("a",{href:"https://www.jianshu.com/p/73164966c6fe",target:"_blank",rel:"noopener noreferrer",children:"https://www.jianshu.com/p/73164966c6fe"})},"jianshu")]})]})};function b(e){return(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(a(),{children:[(0,m.jsx)("title",{children:"浏览器事件循环"}),(0,m.jsx)("meta",{name:"keywords",content:"浏览器事件循环"}),(0,m.jsx)("meta",{name:"description",content:"浏览器事件循环"})]}),(0,m.jsx)(x,{})]})}},54892:function(e,n,t){"use strict";var o=t(19623),r=t(73935),a=t(11163),i=t(35846),s=t(97029),l=t(75162),c=t(37653),d=t(76467),u=t(3744),m=t.n(u),h=t(85893),p=i.Z.BackTop;n.Z=function(e){var n=(0,a.useRouter)();return[(0,h.jsxs)("div",{className:m().main,children:[e.goBack?(0,h.jsx)("div",{className:"mb-[16px] text-right",children:(0,h.jsxs)(s.ZP,{onClick:function(e){n.push("/")},children:[(0,h.jsx)(c.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==e?void 0:e.children]},"main"),(0,h.jsx)(d.default,{children:null!=e&&e.goToTop&&("undefined"==typeof document?"undefined":(0,o.Z)(document))==="object"?(0,r.createPortal)((0,h.jsx)(p,{type:"primary",icon:(0,h.jsx)(l.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}},34341:function(e,n,t){"use strict";t(74916);var o=t(88946),r=t.n(o),a=t(81290),i=t.n(a),s=t(41664),l=t.n(s),c=t(97183),d=t(42075),u=t(83062),m=t(67337),h=t(62139),p=t.n(h),f=t(30654),g=t(85893),v=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}],x=["github.io","vercel.app"],b=r()(v).call(v,function(e,n){return(0,g.jsx)("li",{className:p().navListItem,children:(0,g.jsx)(l(),{href:e.href,children:e.title})},e.href)});n.Z=function(e){return(0,g.jsx)(c.Z.Header,{className:p().antdHeader,children:(0,g.jsxs)("div",{className:p().header,children:[(0,g.jsx)("nav",{className:p().headerLeft,children:(0,g.jsx)("ul",{className:p().navList,children:b})}),(0,g.jsx)("div",{className:p().headerRight,children:(0,g.jsxs)(d.Z,{size:16,children:[(0,g.jsx)(u.Z,{title:"切换网站地址",children:(0,g.jsx)("a",{className:p().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(e){var n=window.location,t=n.pathname,o=n.hostname,r=/github\.io/.test(o);window.location.href=new(i())(t,"https://duan602728596.".concat(x[r?1:0],"/"))},children:(0,g.jsx)(m.Z,{className:p().switchAddressIcon})})}),(0,g.jsx)("a",{className:p().githubLink,href:"https://github.com/duan602728596",target:"_blank",rel:"noopener noreferrer",children:(0,g.jsx)(f.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},30654:function(e,n,t){"use strict";var o=t(85893);n.Z=function(e){var n=e.className,t=e.imageClassName,r=e.avifSrc,a=e.webpSrc,i=e.src,s=e.alt;return(0,o.jsxs)("picture",{className:n,children:[r&&(0,o.jsx)("source",{srcSet:r,type:"image/avif"}),a&&(0,o.jsx)("source",{srcSet:a,type:"image/webp"}),(0,o.jsx)("img",{className:t,src:i,alt:s})]})}},22410:function(e,n,t){"use strict";var o=t(67294),r=t(34341),a=t(54892),i=t(85893);n.Z=function(e){return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(a.Z,{goToTop:!0,goBack:!0,children:e.children})]})}},56887:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/web/browser-event-loop",function(){return t(6153)}])},3744:function(e){e.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},62139:function(e){e.exports={antdHeader:"nav_antdHeader__eCvl0",header:"nav_header__y1mlw",headerLeft:"nav_headerLeft__PrT7_",headerRight:"nav_headerRight__JfqYP",navList:"nav_navList__3HXot",navListItem:"nav_navListItem__hpAdz",switchAddress:"nav_switchAddress__sVzqD",githubLink:"nav_githubLink__BDzSl",switchAddressIcon:"nav_switchAddressIcon__KLxGG"}},64217:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var o=t(1413),r="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function a(e,n){return 0===e.indexOf(n)}function i(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n=!1===t?{aria:!0,data:!0,attr:!0}:!0===t?{aria:!0}:(0,o.Z)({},t);var i={};return Object.keys(e).forEach(function(t){(n.aria&&("role"===t||a(t,"aria-"))||n.data&&a(t,"data-")||n.attr&&r.includes(t))&&(i[t]=e[t])}),i}}},function(e){e.O(0,[3576,7467,9166,9774,2888,179],function(){return e(e.s=56887)}),_N_E=e.O()}]);