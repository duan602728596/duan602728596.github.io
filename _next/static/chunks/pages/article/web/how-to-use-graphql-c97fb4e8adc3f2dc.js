(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4880],{23641:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/web/how-to-use-graphql",function(){return r(55099)}])},55099:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return N}});var o=r(85893),a=r(67294),l=r(9008),t=r.n(l),s=r(66252),c=r(26219),p=r(11151);function i(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"import { graphql, buildSchema } from 'graphql';\n\nconst schema = buildSchema(/* GraphQL */ `\n  type Query {\n    hello: String\n  }\n`);\nconst root = { hello: () => 'Hello world!' };\n\nconst response = await graphql({\n  schema,\n  source: /* GraphQL */ `\n    {\n      hello\n    }\n  `,\n  rootValue: root\n});\n\nconsole.log(response);\n"})})}function h(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(i,{...n})}):i(n)}function u(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-graphql",children:"#import './human.graphql'\n\ntype Query {\n    hello: String\n    human(age: Int): Human\n}\n"})})}function d(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(u,{...n})}):u(n)}function m(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-graphql",children:"type Human {\n    name: String\n    age: Int\n}\n"})})}function j(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(m,{...n})}):m(n)}function x(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"import { URL } from 'node:url';\nimport { loadSchema } from '@graphql-tools/load';\nimport { GraphQLFileLoader } from '@graphql-tools/graphql-file-loader';\n\nexport async function getSchema(file, importMetaUrl) {\n  const urlResult = decodeURIComponent(new URL(file, importMetaUrl).pathname);\n\n  return loadSchema(urlResult, {\n    loaders: [new GraphQLFileLoader()]\n  });\n}\n"})})}function g(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(x,{...n})}):x(n)}function f(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"import { graphql } from 'graphql';\nimport { addResolversToSchema } from '@graphql-tools/schema'\nimport { getSchema } from './utils.js';\n\nconst resolvers = {\n  Query: {\n    hello(obj, args, context, info) {\n      return '你好';\n    },\n    human(obj, args, context, info) {\n      return {\n        name: '小明',\n        age: args.age + obj.$add()\n      };\n    }\n  }\n};\nconst schema = await getSchema('./query.graphql', import.meta.url);\nconst schemaWithResolvers = addResolversToSchema({ schema, resolvers });\n\nconst response = await graphql({\n  schema: schemaWithResolvers,\n  source: /* GraphQL */ `\n    {\n      hello\n      human(age: 56) {\n        name\n        age\n      }\n    }\n  `,\n  rootValue: {\n    $add() {\n      return 32;\n    }\n  }\n});\n\nconsole.log(response.data);\n"})})}function q(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(f,{...n})}):f(n)}function v(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"export default {\n  mode: 'development',\n  module: {\n    rules: [\n      {\n        test: /^.*\\.(gql|graphql)$/,\n        loader: '@graphql-tools/webpack-loader',\n        options: {\n          importHelpers: true\n        }\n      }\n    ]\n  }\n};\n"})})}function w(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(v,{...n})}):v(n)}function b(n){let e={code:"code",pre:"pre",...(0,p.a)(),...n.components};return(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:"import { graphql, buildASTSchema } from 'graphql';\nimport query from './query.graphql';\n\nconst root = {\n  hello() {\n    return '你好';\n  },\n  human() {\n    return {\n      name: '小明',\n      age: 14\n    };\n  }\n}\n\ngraphql({\n  schema: buildASTSchema(query),\n  source: /* GraphQL */ `\n    {\n        hello\n        human {\n            name\n            age\n        }\n    }\n  `,\n  rootValue: root\n}).then((response) => {\n  console.log(response);\n});\n"})})}function _(n={}){let{wrapper:e}={...(0,p.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(b,{...n})}):b(n)}let{Title:y,Paragraph:S}=s.default;var L=function(n){return(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(y,{children:"如何使用GraphQL"}),(0,o.jsx)(y,{level:2,children:"快速开始"}),(0,o.jsx)(S,{children:"通过下面的代码，我们可以快速使用GraphQL实现查询。"}),(0,o.jsx)(h,{}),(0,o.jsx)(y,{level:2,children:"使用graphql-tools"}),(0,o.jsx)(S,{children:"我们可以使用graphql-tools来使用GraphQL。"}),(0,o.jsx)(S,{children:"首先我们先创建两个GraphQL文件。"}),(0,o.jsx)(y,{level:3,children:"query.graphql"}),(0,o.jsx)(d,{}),(0,o.jsx)(y,{level:3,children:"human.graphql"}),(0,o.jsx)(j,{}),(0,o.jsx)(S,{children:"创建一个方法，用于加载GraphQL文件。"}),(0,o.jsx)(g,{}),(0,o.jsx)(S,{children:"实现查询。"}),(0,o.jsx)(q,{}),(0,o.jsx)(y,{level:2,children:"webpack配置"}),(0,o.jsx)(S,{children:"如果要通过webpack来配置使用，首先要配置loader。"}),(0,o.jsx)(w,{}),(0,o.jsx)(S,{children:"然后在项目中使用。"}),(0,o.jsx)(_,{})]})};function N(n){return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(t(),{children:(0,o.jsx)("title",{children:"如何使用GraphQL"})}),(0,o.jsx)(L,{})]})}},94914:function(n,e,r){"use strict";var o=r(85893),a=r(73935),l=r(39332),t=r(29155),s=r(73991),c=r(70612),p=r(30448),i=r(76467),h=r(1294),u=r.n(h);let{BackTop:d}=t.default;e.Z=function(n){let e=(0,l.useRouter)();return[(0,o.jsxs)("div",{className:u().main,children:[n.goBack?(0,o.jsx)("div",{className:"mb-[16px] text-right",children:(0,o.jsxs)(s.ZP,{onClick:function(n){e.push("/")},children:[(0,o.jsx)(p.Z,{className:"mr-[6px]"}),"返回"]})}):null,n?.children]},"main"),n?.goToTop?(0,o.jsx)(i.default,{children:"object"==typeof document?(0,a.createPortal)((0,o.jsx)(d,{type:"primary",icon:(0,o.jsx)(c.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop"):null]}},26219:function(n,e,r){"use strict";var o=r(85893),a=r(66252),l=r(94914);e.Z=function(n){return(0,o.jsx)(l.Z,{goToTop:!0,goBack:!0,children:(0,o.jsx)(a.default,{children:n.children})})}},1294:function(n){n.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}}},function(n){n.O(0,[3991,5361,2888,9774,179],function(){return n(n.s=23641)}),_N_E=n.O()}]);