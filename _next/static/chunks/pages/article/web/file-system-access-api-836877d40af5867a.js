(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8747],{5467:function(e,n,t){"use strict";function r(e){return Object.keys(e).reduce((function(n,t){return!t.startsWith("data-")&&!t.startsWith("aria-")&&"role"!==t||t.startsWith("data-__")||(n[t]=e[t]),n}),{})}t.d(n,{Z:function(){return r}})},14670:function(e,n,t){"use strict";t.d(n,{Z:function(){return F}});var r=t(87462),c=t(97685),a=t(4942),s=t(89739),i=t(8751),o=t(4340),l=t(18429),u=t(97937),d=t(21640),p=t(11475),h=t(78860),f=t(45605),m=t(94184),v=t.n(m),x=t(62874),g=t(67294),w=t(53124),j=t(5467),b=t(96159),y=t(15671),Z=t(43144),_=t(32531),N=t(73568),k=function(e){(0,_.Z)(t,e);var n=(0,N.Z)(t);function t(){var e;return(0,y.Z)(this,t),(e=n.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,Z.Z)(t,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e,info:n})}},{key:"render",value:function(){var e=this.props,n=e.message,t=e.description,r=e.children,c=this.state,a=c.error,s=c.info,i=s&&s.componentStack?s.componentStack:null,o="undefined"===typeof n?(a||"").toString():n,l="undefined"===typeof t?i:t;return a?g.createElement(F,{type:"error",message:o,description:g.createElement("pre",null,l)}):r}}]),t}(g.Component),A=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(t[r[c]]=e[r[c]])}return t},S={success:s.Z,info:h.Z,error:o.Z,warning:d.Z},I={success:i.Z,info:f.Z,error:l.Z,warning:p.Z},C=function(e){var n=e.description,t=e.icon,r=e.prefixCls,c=e.type,s=(n?I:S)[c]||null;return t?(0,b.wm)(t,g.createElement("span",{className:"".concat(r,"-icon")},t),(function(){return{className:v()("".concat(r,"-icon"),(0,a.Z)({},t.props.className,t.props.className))}})):g.createElement(s,{className:"".concat(r,"-icon")})},P=function(e){var n=e.isClosable,t=e.closeText,r=e.prefixCls,c=e.closeIcon,a=e.handleClose;return n?g.createElement("button",{type:"button",onClick:a,className:"".concat(r,"-close-icon"),tabIndex:0},t?g.createElement("span",{className:"".concat(r,"-close-text")},t):c):null},E=function(e){var n,t=e.description,s=e.prefixCls,i=e.message,o=e.banner,l=e.className,d=void 0===l?"":l,p=e.style,h=e.onMouseEnter,f=e.onMouseLeave,m=e.onClick,b=e.afterClose,y=e.showIcon,Z=e.closable,_=e.closeText,N=e.closeIcon,k=void 0===N?g.createElement(u.Z,null):N,S=e.action,I=A(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),E=g.useState(!1),F=(0,c.Z)(E,2),T=F[0],L=F[1],O=g.useRef(),R=g.useContext(w.E_),H=R.getPrefixCls,U=R.direction,W=H("alert",s),B=function(e){var n;L(!0),null===(n=I.onClose)||void 0===n||n.call(I,e)},M=!!_||Z,z=function(){var e=I.type;return void 0!==e?e:o?"warning":"info"}(),D=!(!o||void 0!==y)||y,X=v()(W,"".concat(W,"-").concat(z),(n={},(0,a.Z)(n,"".concat(W,"-with-description"),!!t),(0,a.Z)(n,"".concat(W,"-no-icon"),!D),(0,a.Z)(n,"".concat(W,"-banner"),!!o),(0,a.Z)(n,"".concat(W,"-rtl"),"rtl"===U),n),d),G=(0,j.Z)(I);return g.createElement(x.Z,{visible:!T,motionName:"".concat(W,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:b},(function(e){var n=e.className,c=e.style;return g.createElement("div",(0,r.Z)({ref:O,"data-show":!T,className:v()(X,n),style:(0,r.Z)((0,r.Z)({},p),c),onMouseEnter:h,onMouseLeave:f,onClick:m,role:"alert"},G),D?g.createElement(C,{description:t,icon:I.icon,prefixCls:W,type:z}):null,g.createElement("div",{className:"".concat(W,"-content")},i?g.createElement("div",{className:"".concat(W,"-message")},i):null,t?g.createElement("div",{className:"".concat(W,"-description")},t):null),S?g.createElement("div",{className:"".concat(W,"-action")},S):null,g.createElement(P,{isClosable:!!M,closeText:_,prefixCls:W,closeIcon:k,handleClose:B}))}))};E.ErrorBoundary=k;var F=E},55733:function(e,n,t){"use strict";t(24675)},84818:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var r=t(67294),c=t(9008),a=t.n(c),s=(t(55733),t(14670)),i=(t(71214),t(63534)),o=t(9991),l=t(44845),u=(t(54633),t(72806)),d=t(33938),p=t(8333),h=t(30222),f=t.n(h),m=t(81290),v=t.n(m);t(68309),t(74916),t(4723);function x(e){var n=e.match(/\.[a-zA-Z0-9]+$/);if(!n)return null;switch(n[0]){case".png":case".jpg":case".jpeg":return"image/png";case".webp":return"image/webp";case".avif":return"image/avif"}}var g={"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],"image/webp":[".webp"],"image/avif":[".avif"]},w={types:[{description:"\u56fe\u7247",accept:g}]},j=t(85893);var b=function(e){var n=(0,r.useState)(null),t=(0,p.Z)(n,2),c=t[0],a=t[1];function s(){return(s=(0,d.Z)(f().mark((function e(n){var t,r,c,s,i,o,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.showOpenFilePicker(w);case 3:return t=e.sent,r=(0,p.Z)(t,1),c=r[0],e.next=8,c.getFile();case 8:return s=e.sent,e.next=11,s.arrayBuffer();case 11:i=e.sent,o=x(s.name),l=new Blob([i],{type:o}),a({src:v().createObjectURL(l),content:i,mime:o}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function i(){return(i=(0,d.Z)(f().mark((function e(n){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.showSaveFilePicker({types:[{description:"\u56fe\u7247",accept:(0,l.Z)({},c.mime,g[c.mime])}]});case 5:return t=e.sent,e.next=8,t.createWritable();case 8:return r=e.sent,e.next=11,r.write(c.content);case 11:return e.next=13,r.close();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}return[(0,j.jsxs)(u.Z.Group,{children:[(0,j.jsx)(u.Z,{onClick:function(e){return s.apply(this,arguments)},children:"\u52a0\u8f7d\u56fe\u7247"}),(0,j.jsx)(u.Z,{onClick:function(e){return i.apply(this,arguments)},children:"\u4fdd\u5b58\u56fe\u7247"})]},"button-group"),(0,j.jsx)("div",{className:"my-[16px]",children:null!==c&&void 0!==c&&c.src?(0,j.jsx)("img",{className:"block max-w-full",src:c.src}):null},"image")]},y=t(67552),Z=t.n(y),_=t(11151);function N(e){var n=Z()({pre:"pre",code:"code"},(0,_.ah)(),e.components);return(0,j.jsx)(n.pre,{children:(0,j.jsx)(n.code,{className:"language-javascript",children:"const [fileHandle] = await window.showOpenFilePicker();\nconst file = await fileHandle.getFile();\nconst content = await file.arrayBuffer();\nconst blob = new Blob([content], { type: 'image/png' });\nconst img = document.createElement('img');\n\ndocument.body.appendChild(img);\nimg.src = URL.createObjectURL(blob);\n"})})}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Z()({},(0,_.ah)(),e.components),t=n.wrapper;return t?(0,j.jsx)(t,Z()({},e,{children:(0,j.jsx)(N,e)})):N(e)};function A(e){var n=Z()({pre:"pre",code:"code"},(0,_.ah)(),e.components);return(0,j.jsx)(n.pre,{children:(0,j.jsx)(n.code,{className:"language-javascript",children:"const handle = await window.showSaveFilePicker({\n  types: [{\n    description: 'Test files',\n    accept: {\n      'image/png': ['.png']\n    }\n  }]\n});\nconst writable = await handle.createWritable();\n\nawait writable.write(content);\nawait writable.close();\n"})})}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Z()({},(0,_.ah)(),e.components),t=n.wrapper;return t?(0,j.jsx)(t,Z()({},e,{children:(0,j.jsx)(A,e)})):A(e)},I=i.Z.Title,C=i.Z.Paragraph,P=i.Z.Text;var E=function(e){return(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(I,{children:"\u4f7f\u7528File System Access API\u8bbf\u95ee\u6587\u4ef6"}),(0,j.jsx)(C,{children:"\u6700\u65b0\u7684File System Access API\u53ef\u4ee5\u8bbf\u95ee\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b8c\u6210\u6587\u4ef6\u7684\u8bfb\u53d6\u548c\u4fdd\u5b58\u3002"}),(0,j.jsxs)(C,{children:["\u4f7f\u7528",(0,j.jsx)(P,{code:!0,children:"window.showOpenFilePicker"}),"\u83b7\u53d6",(0,j.jsx)(P,{code:!0,children:"fileHandle"}),"\uff0c\u5b8c\u6210\u6587\u4ef6\u7684\u8bfb\u53d6\u3002"]}),(0,j.jsx)(k,{}),(0,j.jsxs)(C,{children:["\u4f7f\u7528",(0,j.jsx)(P,{code:!0,children:"window.showSaveFilePicker"}),"\u83b7\u53d6",(0,j.jsx)(P,{code:!0,children:"handle"}),"\uff0c\u5b8c\u6210\u6587\u4ef6\u7684\u4fdd\u5b58\u3002"]}),(0,j.jsx)(S,{}),(0,j.jsx)(C,{children:"\u8fd9\u4e2aDemo\u5c55\u793a\u4e86\u5982\u4f55\u52a0\u8f7d\u56fe\u7247\u548c\u4fdd\u5b58\u56fe\u7247\u3002"}),(0,j.jsx)(b,{}),(0,j.jsx)(s.Z,{type:"info",message:[(0,j.jsx)("h2",{className:"mb-0 py-[8px] text-[16px]",children:"\u53c2\u8003\u5730\u5740\uff1a"},"cankaodizhi"),(0,j.jsxs)("div",{className:"py-[8px]",children:["Getting Started With the File System Access API\uff1a",(0,j.jsx)("a",{href:"https://css-tricks.com/getting-started-with-the-file-system-access-api/",target:"_blank",rel:"noopener noreferrer",children:"https://css-tricks.com/getting-started-with-the-file-system-access-api/"})]},"getting-started-with-the-file-system-access-api"),(0,j.jsxs)("div",{className:"py-[8px]",children:["File_System_Access_API\uff1a",(0,j.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API",target:"_blank",rel:"noopener noreferrer",children:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API"})]},"file"),(0,j.jsxs)("div",{className:"py-[8px]",children:["FileAPI\uff1a",(0,j.jsx)("a",{href:"https://w3c.github.io/FileAPI/",target:"_blank",rel:"noopener noreferrer",children:"https://w3c.github.io/FileAPI/"})]},"fileAPI")]})]})};function F(e){return(0,j.jsxs)(r.Fragment,{children:[(0,j.jsxs)(a(),{children:[(0,j.jsx)("title",{children:"\u4f7f\u7528File System Access API\u8bbf\u95ee\u6587\u4ef6"}),(0,j.jsx)("meta",{name:"keywords",content:"\u524d\u7aef, js, javascript, File System Access API"}),(0,j.jsx)("meta",{name:"description",content:"\u4f7f\u7528File System Access API\u8bbf\u95ee\u6587\u4ef6"})]}),(0,j.jsx)(E,{})]})}},39748:function(e,n,t){"use strict";t(54633);var r=t(72806),c=(t(56091),t(53308)),a=t(19623),s=t(73935),i=t(11163),o=t(6171),l=t(76467),u=t(97680),d=t.n(u),p=t(85893);n.Z=function(e){var n=(0,i.useRouter)();return[(0,p.jsxs)("div",{className:d().main,children:[e.goBack?(0,p.jsx)("div",{className:"mb-[16px] text-right",children:(0,p.jsxs)(r.Z,{onClick:function(e){n.push("/")},children:[(0,p.jsx)(o.Z,{className:"mr-[6px]"}),"\u8fd4\u56de"]})}):null,null===e||void 0===e?void 0:e.children]},"main"),(0,p.jsx)(l.default,{children:null!==e&&void 0!==e&&e.goToTop&&"object"===("undefined"===typeof document?"undefined":(0,a.Z)(document))?(0,s.createPortal)((0,p.jsx)(c.Z,{title:"\u8fd4\u56de\u9876\u90e8",tabIndex:0,role:"button","aria-label":"\u8fd4\u56de\u9876\u90e8",children:(0,p.jsx)("div",{className:d().goToTop,children:"UP"})}),document.body):null},"backTop")]}},32307:function(e,n,t){"use strict";t(86230);var r=t(97183),c=(t(2042),t(26713)),a=(t(20559),t(84908)),s=(t(74916),t(88946)),i=t.n(s),o=t(81290),l=t.n(o),u=t(41664),d=t.n(u),p=t(67337),h=t(56392),f=t.n(h),m=t(2013),v=t(85893),x=[{href:"/",title:"\u6587\u7ae0"},{href:"/favorites",title:"\u6536\u85cf\u5939"},{href:"/project",title:"\u5f00\u6e90\u9879\u76ee"}],g=["github.io","vercel.app"],w=i()(x).call(x,(function(e,n){return(0,v.jsx)("li",{className:f().navListItem,children:(0,v.jsx)(d(),{href:e.href,children:e.title})},e.href)}));n.Z=function(e){return(0,v.jsx)(r.Z.Header,{className:f().antdHeader,children:(0,v.jsxs)("div",{className:f().header,children:[(0,v.jsx)("nav",{className:f().headerLeft,children:(0,v.jsx)("ul",{className:f().navList,children:w})}),(0,v.jsx)("div",{className:f().headerRight,children:(0,v.jsxs)(c.Z,{size:16,children:[(0,v.jsx)(a.Z,{title:"\u5207\u6362\u7f51\u7ad9\u5730\u5740",children:(0,v.jsx)("a",{className:f().switchAddress,role:"button",tabIndex:0,"aria-label":"\u5207\u6362\u7f51\u7ad9\u5730\u5740",onClick:function(e){var n=window.location,t=n.pathname,r=n.hostname,c=/github\.io/.test(r);window.location.href=new(l())(t,"https://duan602728596.".concat(g[c?1:0],"/"))},children:(0,v.jsx)(p.Z,{className:f().switchAddressIcon})})}),(0,v.jsx)("a",{className:f().githubLink,href:"https://github.com/duan602728596",target:"_blank",rel:"noopener noreferrer",children:(0,v.jsx)(m.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},2013:function(e,n,t){"use strict";var r=t(85893);n.Z=function(e){var n=e.className,t=e.imageClassName,c=e.avifSrc,a=e.webpSrc,s=e.src,i=e.alt;return(0,r.jsxs)("picture",{className:n,children:[c&&(0,r.jsx)("source",{srcSet:c,type:"image/avif"}),a&&(0,r.jsx)("source",{srcSet:a,type:"image/webp"}),(0,r.jsx)("img",{className:t,src:s,alt:i})]})}},9991:function(e,n,t){"use strict";var r=t(67294),c=t(32307),a=t(39748),s=t(85893);n.Z=function(e){return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(c.Z,{}),(0,s.jsx)(a.Z,{goToTop:!0,goBack:!0,children:e.children})]})}},94034:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/web/file-system-access-api",function(){return t(84818)}])},97680:function(e){e.exports={main:"main_main__ovwFV",goToTop:"main_goToTop__Soij4"}},56392:function(e){e.exports={antdHeader:"nav_antdHeader__pc6AA",header:"nav_header__K7RoR",headerLeft:"nav_headerLeft__D5kPR",headerRight:"nav_headerRight__plZ1z",navList:"nav_navList__iDQNr",navListItem:"nav_navListItem__UblqT",switchAddress:"nav_switchAddress__vhjXS",githubLink:"nav_githubLink__1sY1n",switchAddressIcon:"nav_switchAddressIcon__e5KfQ"}},84406:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,{Z:function(){return r}})},33938:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35820);function c(e,n,t,c,a,s,i){try{var o=e[s](i),l=o.value}catch(u){return void t(u)}o.done?n(l):r.resolve(l).then(c,a)}function a(e){return function(){var n=this,t=arguments;return new r((function(r,a){var s=e.apply(n,t);function i(e){c(s,r,a,i,o,"next",e)}function o(e){c(s,r,a,i,o,"throw",e)}i(void 0)}))}}},8333:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(98235);var c=t(52472),a=t(19389);var s=t(71518);function i(e,n){return function(e){if(r(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof c&&a(e)||e["@@iterator"];if(null!=t){var r,s,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(u){l=!0,s=u}finally{try{o||null==t.return||t.return()}finally{if(l)throw s}}return i}}(e,n)||(0,s.Z)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71518:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(35704),c=t(10349),a=t(84406);function s(e,n){var t;if(e){if("string"===typeof e)return(0,a.Z)(e,n);var s=r(t=Object.prototype.toString.call(e)).call(t,8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?c(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?(0,a.Z)(e,n):void 0}}}},function(e){e.O(0,[2806,542,7161,9774,2888,179],(function(){return n=94034,e(e.s=n);var n}));var n=e.O();_N_E=n}]);