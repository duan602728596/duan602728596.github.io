(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{51904:function(e,n,t){"use strict";t.d(n,{Z:function(){return S}});var o=t(4942),r=t(87462),a=t(97685),c=t(97937),i=t(94184),l=t.n(i),s=t(67294),d=t(53124),u=t(98787),h=t(28704),p=t(96937),f=t(67968),g=t(45503),m=t(14747),x=function(e,n,t){var r="string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1);return(0,o.Z)({},"".concat(e.componentCls,"-").concat(n),{color:e["color".concat(t)],background:e["color".concat(r,"Bg")],borderColor:e["color".concat(r,"Border")]})},b=function(e){var n,t=e.paddingXXS,a=e.lineWidth,c=e.tagPaddingHorizontal-a;return(0,o.Z)({},e.componentCls,(0,r.Z)((0,r.Z)({},(0,m.Wf)(e)),(n={display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:c,fontSize:e.tagFontSize,lineHeight:"".concat(e.tagLineHeight,"px"),whiteSpace:"nowrap",background:e.tagDefaultBg,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationFast),textAlign:"start","&&-rtl":{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor}},(0,o.Z)(n,"".concat(e.componentCls,"-close-icon"),{marginInlineStart:t-a,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:"all ".concat(e.motionDurationFast),"&:hover":{color:e.colorTextHeading}}),(0,o.Z)(n,"&&-has-color",(0,o.Z)({borderColor:"transparent"},"&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover"),{color:e.colorTextLightSolid})),(0,o.Z)(n,"&-checkable",{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer","&:not(&-checked):hover":{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}}),(0,o.Z)(n,"&-hidden",{display:"none"}),(0,o.Z)(n,"> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls),{marginInlineStart:c}),n)))},v=(0,f.Z)("Tag",function(e){var n=e.fontSize,t=e.lineHeight,a=e.lineWidth,c=e.fontSizeIcon,i=e.fontSizeSM,l=e.colorFillAlter,s=e.colorText,d=(0,g.TS)(e,{tagFontSize:i,tagLineHeight:Math.round(n*t)-2*a,tagDefaultBg:l,tagDefaultColor:s,tagIconSize:c-2*a,tagPaddingHorizontal:8});return[b(d),p.i.reduce(function(e,n){var t,a=d["".concat(n,"-1")],c=d["".concat(n,"-3")],i=d["".concat(n,"-6")],l=d["".concat(n,"-7")];return(0,r.Z)((0,r.Z)({},e),(t={},(0,o.Z)(t,"".concat(d.componentCls,"-").concat(n),{color:l,background:a,borderColor:c}),(0,o.Z)(t,"".concat(d.componentCls,"-").concat(n,"-inverse"),{color:d.colorTextLightSolid,background:i,borderColor:i}),t))},{}),x(d,"success","Success"),x(d,"processing","Info"),x(d,"error","Error"),x(d,"warning","Warning")]}),j=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>n.indexOf(o)&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>n.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t},_=function(e){var n,t=e.prefixCls,c=e.className,i=e.checked,u=e.onChange,h=e.onClick,p=j(e,["prefixCls","className","checked","onChange","onClick"]),f=s.useContext(d.E_).getPrefixCls,g=function(e){null==u||u(!i),null==h||h(e)},m=f("tag",t),x=v(m),b=(0,a.Z)(x,2),_=b[0],Z=b[1],y=l()(m,(n={},(0,o.Z)(n,"".concat(m,"-checkable"),!0),(0,o.Z)(n,"".concat(m,"-checkable-checked"),i),n),c,Z);return _(s.createElement("span",(0,r.Z)({},p,{className:y,onClick:g})))},Z=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>n.indexOf(o)&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>n.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t},y=RegExp("^(".concat(u.Y.join("|"),")(-inverse)?$")),k=RegExp("^(".concat(u.E.join("|"),")$")),C=function(e,n){var t,i=e.prefixCls,u=e.className,p=e.style,f=e.children,g=e.icon,m=e.color,x=e.onClose,b=e.closeIcon,j=e.closable,_=Z(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),C=s.useContext(d.E_),w=C.getPrefixCls,S=C.direction,N=s.useState(!0),T=(0,a.Z)(N,2),P=T[0],E=T[1];s.useEffect(function(){"visible"in _&&E(_.visible)},[_.visible]);var L=function(){return!!m&&(y.test(m)||k.test(m))},O=(0,r.Z)({backgroundColor:m&&!L()?m:void 0},p),I=L(),F=w("tag",i),z=v(F),R=(0,a.Z)(z,2),A=R[0],D=R[1],H=l()(F,(t={},(0,o.Z)(t,"".concat(F,"-").concat(m),I),(0,o.Z)(t,"".concat(F,"-has-color"),m&&!I),(0,o.Z)(t,"".concat(F,"-hidden"),!P),(0,o.Z)(t,"".concat(F,"-rtl"),"rtl"===S),t),u,D),B=function(e){e.stopPropagation(),null==x||x(e),e.defaultPrevented||E(!1)},U="onClick"in _||f&&"a"===f.type,X=g||null,W=X?s.createElement(s.Fragment,null,X,s.createElement("span",null,f)):f,M=s.createElement("span",(0,r.Z)({},_,{ref:n,className:H,style:O}),W,void 0!==j&&j?b?s.createElement("span",{className:"".concat(F,"-close-icon"),onClick:B},b):s.createElement(c.Z,{className:"".concat(F,"-close-icon"),onClick:B}):null);return A(U?s.createElement(h.Z,null,M):M)},w=s.forwardRef(C);w.CheckableTag=_;var S=w},31965:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var o=t(67294),r=t(9008),a=t.n(r),c=t(76315),i=t(51904),l=t(32307),s=t.n(l),d=t(34065),u=t(67552),h=t.n(u),p=t(85893),f=t(11151);function g(e){var n=h()({pre:"pre",code:"code"},(0,f.ah)(),e.components);return(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-dart",children:"import 'dart:io';\nimport 'dart:typed_data';\nimport 'package:dio/dio.dart';\n\nFuture<Response<dynamic>> requestUploadFile(filePath) async {\n  Dio dio = Dio();\n  File file = File(filePath);\n  Uint8List bytes = await file.readAsBytes();\n  Stream<List<int>> stream = MultipartFile.fromBytes(bytes).finalize();\n\n  Response<dynamic> response = await dio.put(\n    'https://xxxxxx.com/upload',\n    data: stream,\n    options: Options(\n      contentType: mimeType,\n      headers: {\n        'content-length': (await file.length()).toString()\n      }\n    )\n  );\n\n  return response;\n}\n"})})}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=h()({},(0,f.ah)(),e.components).wrapper;return n?(0,p.jsx)(n,h()({},e,{children:(0,p.jsx)(g,e)})):g(e)},x=c.Z.Title,b=c.Z.Paragraph,v=function(){return(0,p.jsxs)(d.Z,{children:[(0,p.jsx)(x,{children:"使用dio上传文件"}),(0,p.jsxs)(b,{children:["在Flutter开发中，使用",(0,p.jsx)("a",{href:"https://github.com/flutterchina/dio",target:"_blank",rel:"noopener noreferrer",children:"dio"}),"实现上传文件的功能："]}),(0,p.jsx)(m,{}),(0,p.jsxs)(b,{children:["由于dio会将请求转换成",(0,p.jsx)(i.Z,{className:s().tag,children:"String"}),"类型，所以需要将",(0,p.jsx)(i.Z,{className:s().tag,children:"Uint8List"}),"类型转换成",(0,p.jsx)(i.Z,{className:s().tag,children:"Stream<List<int>>"}),"类型。具体请参考dio的",(0,p.jsx)("a",{href:"https://github.com/flutterchina/dio/issues/485#issuecomment-552845924",target:"_blank",rel:"noopener noreferrer",children:"issues"}),"，这块算是一个小坑吧。"]})]})};function j(e){return(0,p.jsxs)(o.Fragment,{children:[(0,p.jsxs)(a(),{children:[(0,p.jsx)("title",{children:"使用dio上传文件"}),(0,p.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart, dio"}),(0,p.jsx)("meta",{name:"description",content:"使用dio上传文件"})]}),(0,p.jsx)(v,{})]})}},38914:function(e,n,t){"use strict";var o=t(19623),r=t(73935),a=t(11163),c=t(6592),i=t(97960),l=t(75162),s=t(6171),d=t(76467),u=t(35919),h=t.n(u),p=t(85893),f=c.Z.BackTop;n.Z=function(e){var n=(0,a.useRouter)();return[(0,p.jsxs)("div",{className:h().main,children:[e.goBack?(0,p.jsx)("div",{className:"mb-[16px] text-right",children:(0,p.jsxs)(i.Z,{onClick:function(e){n.push("/")},children:[(0,p.jsx)(s.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==e?void 0:e.children]},"main"),(0,p.jsx)(d.default,{children:null!=e&&e.goToTop&&("undefined"==typeof document?"undefined":(0,o.Z)(document))==="object"?(0,r.createPortal)((0,p.jsx)(f,{type:"primary",icon:(0,p.jsx)(l.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}},43699:function(e,n,t){"use strict";t(74916);var o=t(88946),r=t.n(o),a=t(81290),c=t.n(a),i=t(41664),l=t.n(i),s=t(97183),d=t(26713),u=t(83062),h=t(67337),p=t(48739),f=t.n(p),g=t(90010),m=t(85893),x=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}],b=["github.io","vercel.app"],v=r()(x).call(x,function(e,n){return(0,m.jsx)("li",{className:f().navListItem,children:(0,m.jsx)(l(),{href:e.href,children:e.title})},e.href)});n.Z=function(e){return(0,m.jsx)(s.Z.Header,{className:f().antdHeader,children:(0,m.jsxs)("div",{className:f().header,children:[(0,m.jsx)("nav",{className:f().headerLeft,children:(0,m.jsx)("ul",{className:f().navList,children:v})}),(0,m.jsx)("div",{className:f().headerRight,children:(0,m.jsxs)(d.Z,{size:16,children:[(0,m.jsx)(u.Z,{title:"切换网站地址",children:(0,m.jsx)("a",{className:f().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(e){var n=window.location,t=n.pathname,o=n.hostname,r=/github\.io/.test(o);window.location.href=new(c())(t,"https://duan602728596.".concat(b[r?1:0],"/"))},children:(0,m.jsx)(h.Z,{className:f().switchAddressIcon})})}),(0,m.jsx)("a",{className:f().githubLink,href:"https://github.com/duan602728596",target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)(g.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},90010:function(e,n,t){"use strict";var o=t(85893);n.Z=function(e){var n=e.className,t=e.imageClassName,r=e.avifSrc,a=e.webpSrc,c=e.src,i=e.alt;return(0,o.jsxs)("picture",{className:n,children:[r&&(0,o.jsx)("source",{srcSet:r,type:"image/avif"}),a&&(0,o.jsx)("source",{srcSet:a,type:"image/webp"}),(0,o.jsx)("img",{className:t,src:c,alt:i})]})}},34065:function(e,n,t){"use strict";var o=t(67294),r=t(43699),a=t(38914),c=t(85893);n.Z=function(e){return(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(r.Z,{}),(0,c.jsx)(a.Z,{goToTop:!0,goBack:!0,children:e.children})]})}},17158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/dio-upload-file",function(){return t(31965)}])},35919:function(e){e.exports={main:"main_main__ovwFV",goToTop:"main_goToTop__Soij4"}},48739:function(e){e.exports={antdHeader:"nav_antdHeader__pc6AA",header:"nav_header__K7RoR",headerLeft:"nav_headerLeft__D5kPR",headerRight:"nav_headerRight__plZ1z",navList:"nav_navList__iDQNr",navListItem:"nav_navListItem__UblqT",switchAddress:"nav_switchAddress__vhjXS",githubLink:"nav_githubLink__1sY1n",switchAddressIcon:"nav_switchAddressIcon__e5KfQ"}},32307:function(e){e.exports={tag:"dioUploadFile_tag__QQ95N"}}},function(e){e.O(0,[7960,4796,7646,9774,2888,179],function(){return e(e.s=17158)}),_N_E=e.O()}]);