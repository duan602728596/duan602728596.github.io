(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{79977:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(67294),o=n(97937),l=n(93967),i=n.n(l),a=n(98787),s=function(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.createElement(o.Z,null),i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("boolean"==typeof e?!e:void 0===t?!i:!1===t||null===t)return[!1,null];let a="boolean"==typeof t||null==t?l:t;return[!0,n?n(a):a]},c=n(45353),d=n(53124),u=n(54548),p=n(10274),h=n(14747),g=n(45503),f=n(91945);let m=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:o,calc:l}=e,i=l(r).sub(n).equal(),a=l(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,u.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:a,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},b=e=>{let{lineWidth:t,fontSizeIcon:n,calc:r}=e,o=e.fontSizeSM;return(0,g.TS)(e,{tagFontSize:o,tagLineHeight:(0,u.bf)(r(e.lineHeightSM).mul(o).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},x=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var v=(0,f.I$)("Tag",e=>m(b(e)),x),j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let y=r.forwardRef((e,t)=>{let{prefixCls:n,style:o,className:l,checked:a,onChange:s,onClick:c}=e,u=j(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:h}=r.useContext(d.E_),g=p("tag",n),[f,m,b]=v(g),x=i()(g,`${g}-checkable`,{[`${g}-checkable-checked`]:a},null==h?void 0:h.className,l,m,b);return f(r.createElement("span",Object.assign({},u,{ref:t,style:Object.assign(Object.assign({},o),null==h?void 0:h.style),className:x,onClick:e=>{null==s||s(!a),null==c||c(e)}})))});var C=n(98719);let _=e=>(0,C.Z)(e,(t,n)=>{let{textColor:r,lightBorderColor:o,lightColor:l,darkColor:i}=n;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:l,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var k=(0,f.bk)(["Tag","preset"],e=>_(b(e)),x);let w=(e,t,n)=>{let r="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var N=(0,f.bk)(["Tag","status"],e=>{let t=b(e);return[w(t,"success","Success"),w(t,"processing","Info"),w(t,"error","Error"),w(t,"warning","Warning")]},x),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let $=r.forwardRef((e,t)=>{let{prefixCls:n,className:l,rootClassName:u,style:p,children:h,icon:g,color:f,onClose:m,closeIcon:b,closable:x,bordered:j=!0}=e,y=S(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:C,direction:_,tag:w}=r.useContext(d.E_),[$,T]=r.useState(!0);r.useEffect(()=>{"visible"in y&&T(y.visible)},[y.visible]);let O=(0,a.o2)(f),Z=(0,a.yT)(f),L=O||Z,E=Object.assign(Object.assign({backgroundColor:f&&!L?f:void 0},null==w?void 0:w.style),p),P=C("tag",n),[I,B,F]=v(P),R=i()(P,null==w?void 0:w.className,{[`${P}-${f}`]:L,[`${P}-has-color`]:f&&!L,[`${P}-hidden`]:!$,[`${P}-rtl`]:"rtl"===_,[`${P}-borderless`]:!j},l,u,B,F),H=e=>{e.stopPropagation(),null==m||m(e),e.defaultPrevented||T(!1)},[,z]=s(x,null!=b?b:null==w?void 0:w.closeIcon,e=>null===e?r.createElement(o.Z,{className:`${P}-close-icon`,onClick:H}):r.createElement("span",{className:`${P}-close-icon`,onClick:H},e),null,!1),A="function"==typeof y.onClick||h&&"a"===h.type,q=g||null,D=q?r.createElement(r.Fragment,null,q,h&&r.createElement("span",null,h)):h,M=r.createElement("span",Object.assign({},y,{ref:t,className:R,style:E}),D,z,O&&r.createElement(k,{key:"preset",prefixCls:P}),Z&&r.createElement(N,{key:"status",prefixCls:P}));return I(A?r.createElement(c.Z,{component:"Tag"},M):M)});$.CheckableTag=y;var T=$},17158:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/dio-upload-file",function(){return n(94357)}])},94357:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(85893),o=n(67294),l=n(9008),i=n.n(l),a=n(76315),s=n(79977),c=n(1566),d=n.n(c),u=n(30673),p=n(39182),h=n(11151);function g(e){let t={code:"code",pre:"pre",...(0,h.a)(),...e.components};return(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-dart",children:"import 'dart:io';\nimport 'dart:typed_data';\nimport 'package:dio/dio.dart';\n\nFuture<Response<dynamic>> requestUploadFile(filePath) async {\n  Dio dio = Dio();\n  File file = File(filePath);\n  Uint8List bytes = await file.readAsBytes();\n  Stream<List<int>> stream = MultipartFile.fromBytes(bytes).finalize();\n\n  Response<dynamic> response = await dio.put(\n    'https://xxxxxx.com/upload',\n    data: stream,\n    options: Options(\n      contentType: mimeType,\n      headers: {\n        'content-length': (await file.length()).toString()\n      }\n    )\n  );\n\n  return response;\n}\n"})})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}={...(0,h.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}let{Title:m,Paragraph:b}=a.default;var x=function(){return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(m,{children:"使用dio上传文件"}),(0,r.jsxs)(b,{children:["在Flutter开发中，使用",(0,r.jsx)(p.Z,{href:"https://github.com/flutterchina/dio",children:"dio"}),"实现上传文件的功能："]}),(0,r.jsx)(f,{}),(0,r.jsxs)(b,{children:["由于dio会将请求转换成",(0,r.jsx)(s.Z,{className:d().tag,children:"String"}),"类型，所以需要将",(0,r.jsx)(s.Z,{className:d().tag,children:"Uint8List"}),"类型转换成",(0,r.jsx)(s.Z,{className:d().tag,children:"Stream<List<int>>"}),"类型。具体请参考dio的",(0,r.jsx)(p.Z,{href:"https://github.com/flutterchina/dio/issues/485#issuecomment-552845924",children:"issues"}),"，这块算是一个小坑吧。"]})]})};function v(e){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"使用dio上传文件"}),(0,r.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart, dio"}),(0,r.jsx)("meta",{name:"description",content:"使用dio上传文件"})]}),(0,r.jsx)(x,{})]})}},39182:function(e,t,n){"use strict";var r=n(85893),o=n(45697),l=n.n(o);function i(e){let{href:t,className:n,children:o}=e;return(0,r.jsx)("a",{className:n,href:t,target:"_blank",rel:"noopener noreferrer",children:o})}i.propTypes={href:l().string.isRequired,className:l().string,children:l().node.isRequired},t.Z=i},99388:function(e,t,n){"use strict";var r=n(85893),o=n(73935),l=n(45697),i=n.n(l),a=n(11163),s=n(81860),c=n(10932),d=n(75162),u=n(6171),p=n(76467),h=n(63791),g=n.n(h);let{BackTop:f}=s.default;function m(e){let t=(0,a.useRouter)();return[(0,r.jsxs)("div",{className:g().main,children:[e.goBack?(0,r.jsx)("div",{className:"mb-[16px] text-right",children:(0,r.jsxs)(c.ZP,{onClick:function(e){t.push("/")},children:[(0,r.jsx)(u.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==e?void 0:e.children]},"main"),(0,r.jsx)(p.default,{children:(null==e?void 0:e.goToTop)&&"object"==typeof document?(0,o.createPortal)((0,r.jsx)(f,{type:"primary",icon:(0,r.jsx)(d.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}m.propTypes={children:i().node,goToTop:i().bool,goBack:i().bool},t.Z=m},43221:function(e,t,n){"use strict";var r=n(85893),o=n(41664),l=n.n(o),i=n(21612),a=n(78957),s=n(83062),c=n(67337),d=n(32958),u=n.n(d),p=n(90791),h=n(39182);let g=["github.io","vercel.app"],f=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}].map((e,t)=>(0,r.jsx)("li",{className:u().navListItem,children:(0,r.jsx)(l(),{href:e.href,children:e.title})},e.href));t.Z=function(e){return(0,r.jsx)(i.Z.Header,{className:u().antdHeader,children:(0,r.jsxs)("div",{className:u().header,children:[(0,r.jsx)("nav",{className:u().headerLeft,children:(0,r.jsx)("ul",{className:u().navList,children:f})}),(0,r.jsx)("div",{className:u().headerRight,children:(0,r.jsxs)(a.Z,{size:16,children:[(0,r.jsx)(s.Z,{title:"切换网站地址",children:(0,r.jsx)("a",{className:u().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(e){let{pathname:t,hostname:n}=window.location,r=/github\.io/.test(n);window.location.href=new URL(t,"https://duan602728596.".concat(g[r?1:0],"/"))},children:(0,r.jsx)(c.Z,{className:u().switchAddressIcon})})}),(0,r.jsx)(h.Z,{className:u().githubLink,href:"https://github.com/duan602728596",children:(0,r.jsx)(p.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},90791:function(e,t,n){"use strict";var r=n(85893),o=n(45697),l=n.n(o);function i(e){let{className:t,imageClassName:n,avifSrc:o,webpSrc:l,src:i,alt:a}=e;return(0,r.jsxs)("picture",{className:t,children:[o&&(0,r.jsx)("source",{srcSet:o,type:"image/avif"}),l&&(0,r.jsx)("source",{srcSet:l,type:"image/webp"}),(0,r.jsx)("img",{className:n,src:i,alt:a})]})}i.propTypes={className:l().string,imageClassName:l().string,avifSrc:l().string,webpSrc:l().string,src:l().string},t.Z=i},30673:function(e,t,n){"use strict";var r=n(85893),o=n(67294),l=n(45697),i=n.n(l),a=n(43221),s=n(99388);function c(e){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(s.Z,{goToTop:!0,goBack:!0,children:e.children})]})}c.propTypes={children:i().node},t.Z=c},63791:function(e){e.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},32958:function(e){e.exports={antdHeader:"nav_antdHeader__eCvl0",header:"nav_header__y1mlw",headerLeft:"nav_headerLeft__PrT7_",headerRight:"nav_headerRight__JfqYP",navList:"nav_navList__3HXot",navListItem:"nav_navListItem__hpAdz",switchAddress:"nav_switchAddress__sVzqD",githubLink:"nav_githubLink__BDzSl",switchAddressIcon:"nav_switchAddressIcon__KLxGG"}},1566:function(e){e.exports={tag:"dioUploadFile_tag__lLjR9"}}},function(e){e.O(0,[932,1447,4530,2888,9774,179],function(){return e(e.s=17158)}),_N_E=e.O()}]);