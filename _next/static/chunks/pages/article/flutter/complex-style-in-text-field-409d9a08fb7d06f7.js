(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4909],{90647:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return z}});var i=t(67294),r=t(9008),a=t.n(r),l=t(76315),s=t(55147),c=t(96808),o=t(62079),d=t.n(o),x=t(52020),u=t.n(x),h=t(73324),g=t.n(h),f=t(88546),p=t.n(f),m=t(99595),j=t.n(m),v=t(66775),b=t.n(v),_=t(2201),T=t.n(_),I=t(57445),w=t.n(I),y=t(44845),N=t(85893),S=t(11151);function Z(n,e){var t=d()(n);if(u()){var i=u()(n);e&&(i=g()(i).call(i,function(e){return p()(n,e).enumerable})),t.push.apply(t,i)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t,i,r=null!=arguments[e]?arguments[e]:{};e%2?j()(t=Z(Object(r),!0)).call(t,function(e){(0,y.Z)(n,e,r[e])}):b()?T()(n,b()(r)):j()(i=Z(Object(r))).call(i,function(e){w()(n,e,p()(r,e))})}return n}function C(n){var e=k(k({code:"code",pre:"pre"},(0,S.a)()),n.components);return(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\n\n/* 保证输入框tag高亮的控制器 */\nclass CodeHighlightingController extends TextEditingController {\n  /// 代码高亮\n  /// @param { String } text: 文字\n  List<TextSpan> codeHighlighting(BuildContext context, String text) {\n    List<TextSpan> list = [];\n    List<int> tagIndex = [];\n    int textLength = text.length;\n\n    // 获取\"#\"的index\n    for (int i = 0; i < textLength; i++) {\n      if (text[i] == '#') {\n        tagIndex.add(tagIndex.length % 2 == 0 ? i : (i + 1));\n      }\n    }\n\n    // 奇数时删除数组最后一位，保证区间的完整\n    if (tagIndex.length % 2 != 0) {\n      tagIndex.removeLast();\n    }\n\n    if (tagIndex.length == 0) {\n      // 没有tag，不需要处理\n      list.add(TextSpan(text: text, style: TextStyle(color: Colors.black)));\n    } else {\n      // 处理tag第一位\n      if (tagIndex[0] != 0) {\n        list.add(TextSpan(\n          text: text.substring(0, tagIndex[0]),\n          style: TextStyle(color: Colors.black)\n        ));\n      }\n\n      for (int i = 0; i < tagIndex.length; i++) {\n        int startIndex = tagIndex[i];\n        int endIndex = i == (tagIndex.length - 1) ? textLength : tagIndex[i + 1];\n\n        if (startIndex != endIndex) {\n          bool isLight = i % 2 == 0;\n          String tagText = text.substring(startIndex, endIndex);\n\n          if (tagText != '') {\n            String componentText = text.substring(startIndex, endIndex);\n\n            if (isLight) {\n              list.add(TextSpan(\n                text: componentText,\n                style: TextStyle(color: Colors.blue)\n              ));\n            } else {\n              list.add(TextSpan(\n                text: componentText,\n                style: TextStyle(color: Colors.black)\n              ));\n            }\n          }\n        }\n      }\n    }\n\n    return list;\n  }\n\n  @override\n  TextSpan buildTextSpan({\n    required BuildContext context,\n    required bool withComposing,\n    TextStyle? style\n  }) {\n    return TextSpan(children: codeHighlighting(context, text));\n  }\n}\n"})})}function L(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=k(k({},(0,S.a)()),n.components).wrapper;return e?(0,N.jsx)(e,k(k({},n),{},{children:(0,N.jsx)(C,k({},n))})):C(n)}function F(n,e){var t=d()(n);if(u()){var i=u()(n);e&&(i=g()(i).call(i,function(e){return p()(n,e).enumerable})),t.push.apply(t,i)}return t}function A(n){for(var e=1;e<arguments.length;e++){var t,i,r=null!=arguments[e]?arguments[e]:{};e%2?j()(t=F(Object(r),!0)).call(t,function(e){(0,y.Z)(n,e,r[e])}):b()?T()(n,b()(r)):j()(i=F(Object(r))).call(i,function(e){w()(n,e,p()(r,e))})}return n}function H(n){var e=A(A({code:"code",pre:"pre"},(0,S.a)()),n.components);return(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport './code_highlighting_controller.dart';\n\nfinal CodeHighlightingController _controller = CodeHighlightingController();\n\nclass Form extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return TextField(\n      controller: _controller,\n      autofocus: true,\n      minLines: 5,\n      maxLines: null,\n      keyboardType: TextInputType.multiline,\n      textInputAction: TextInputAction.newline,\n      decoration: InputDecoration.collapsed(hintText: '请输入...'),\n    );\n  }\n}\n"})})}function P(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=A(A({},(0,S.a)()),n.components).wrapper;return e?(0,N.jsx)(e,A(A({},n),{},{children:(0,N.jsx)(H,A({},n))})):H(n)}var B=l.Z.Title,E=l.Z.Paragraph,O=l.Z.Text,q=function(){return(0,N.jsxs)(s.Z,{children:[(0,N.jsx)(B,{children:"在TextField中实现复杂的样式"}),(0,N.jsx)(E,{children:"在Flutter开发中，如果想要用TextField实现复杂的样式，比如："}),(0,N.jsx)(c.Z,{className:"block m-[16px]",imageClassName:"block my-0 mx-auto",avifSrc:"/images/complex-style-in-text-field/tangshi.avif",webpSrc:"/images/complex-style-in-text-field/tangshi.webp",src:"/images/complex-style-in-text-field/tangshi.png",alt:"Flutter开发的App的截图"}),(0,N.jsxs)(E,{children:["两个",(0,N.jsx)(O,{strong:!0,children:"#"}),"之间被识别为tag，高亮为蓝色。"]}),(0,N.jsxs)(E,{children:["为了实现这样的效果，我们需要扩展",(0,N.jsx)(O,{strong:!0,children:"TextEditingController"}),"："]}),(0,N.jsx)(L,{}),(0,N.jsx)(E,{children:"之后用它来创建TextField的controller："}),(0,N.jsx)(P,{})]})};function z(n){return(0,N.jsxs)(i.Fragment,{children:[(0,N.jsxs)(a(),{children:[(0,N.jsx)("title",{children:"在TextField中实现复杂的样式"}),(0,N.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart"}),(0,N.jsx)("meta",{name:"description",content:"在TextField中实现复杂的样式"})]}),(0,N.jsx)(q,{})]})}},19668:function(n,e,t){"use strict";var i=t(85893);e.Z=function(n){var e=n.href,t=n.className,r=n.children;return(0,i.jsx)("a",{className:t,href:e,target:"_blank",rel:"noopener noreferrer",children:r})}},39243:function(n,e,t){"use strict";var i=t(19623),r=t(73935),a=t(11163),l=t(81860),s=t(18610),c=t(75162),o=t(6171),d=t(76467),x=t(63791),u=t.n(x),h=t(85893),g=l.Z.BackTop;e.Z=function(n){var e=(0,a.useRouter)();return[(0,h.jsxs)("div",{className:u().main,children:[n.goBack?(0,h.jsx)("div",{className:"mb-[16px] text-right",children:(0,h.jsxs)(s.ZP,{onClick:function(n){e.push("/")},children:[(0,h.jsx)(o.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==n?void 0:n.children]},"main"),(0,h.jsx)(d.default,{children:null!=n&&n.goToTop&&("undefined"==typeof document?"undefined":(0,i.Z)(document))==="object"?(0,r.createPortal)((0,h.jsx)(g,{type:"primary",icon:(0,h.jsx)(c.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}},31725:function(n,e,t){"use strict";t(64043);var i=t(88946),r=t.n(i),a=t(81290),l=t.n(a),s=t(41664),c=t.n(s),o=t(21612),d=t(78957),x=t(83062),u=t(67337),h=t(32958),g=t.n(h),f=t(96808),p=t(19668),m=t(85893),j=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}],v=["github.io","vercel.app"],b=r()(j).call(j,function(n,e){return(0,m.jsx)("li",{className:g().navListItem,children:(0,m.jsx)(c(),{href:n.href,children:n.title})},n.href)});e.Z=function(n){return(0,m.jsx)(o.Z.Header,{className:g().antdHeader,children:(0,m.jsxs)("div",{className:g().header,children:[(0,m.jsx)("nav",{className:g().headerLeft,children:(0,m.jsx)("ul",{className:g().navList,children:b})}),(0,m.jsx)("div",{className:g().headerRight,children:(0,m.jsxs)(d.Z,{size:16,children:[(0,m.jsx)(x.Z,{title:"切换网站地址",children:(0,m.jsx)("a",{className:g().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(n){var e=window.location,t=e.pathname,i=e.hostname,r=/github\.io/.test(i);window.location.href=new(l())(t,"https://duan602728596.".concat(v[r?1:0],"/"))},children:(0,m.jsx)(u.Z,{className:g().switchAddressIcon})})}),(0,m.jsx)(p.Z,{className:g().githubLink,href:"https://github.com/duan602728596",children:(0,m.jsx)(f.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},96808:function(n,e,t){"use strict";var i=t(85893);e.Z=function(n){var e=n.className,t=n.imageClassName,r=n.avifSrc,a=n.webpSrc,l=n.src,s=n.alt;return(0,i.jsxs)("picture",{className:e,children:[r&&(0,i.jsx)("source",{srcSet:r,type:"image/avif"}),a&&(0,i.jsx)("source",{srcSet:a,type:"image/webp"}),(0,i.jsx)("img",{className:t,src:l,alt:s})]})}},55147:function(n,e,t){"use strict";var i=t(67294),r=t(31725),a=t(39243),l=t(85893);e.Z=function(n){return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)(a.Z,{goToTop:!0,goBack:!0,children:n.children})]})}},46649:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/complex-style-in-text-field",function(){return t(90647)}])},63791:function(n){n.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},32958:function(n){n.exports={antdHeader:"nav_antdHeader__eCvl0",header:"nav_header__y1mlw",headerLeft:"nav_headerLeft__PrT7_",headerRight:"nav_headerRight__JfqYP",navList:"nav_navList__3HXot",navListItem:"nav_navListItem__hpAdz",switchAddress:"nav_switchAddress__sVzqD",githubLink:"nav_githubLink__BDzSl",switchAddressIcon:"nav_switchAddressIcon__KLxGG"}}},function(n){n.O(0,[8610,1447,4530,9774,2888,179],function(){return n(n.s=46649)}),_N_E=n.O()}]);