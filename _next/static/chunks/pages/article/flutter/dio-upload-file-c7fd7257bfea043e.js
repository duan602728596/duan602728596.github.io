(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{79977:function(e,n,r){"use strict";r.d(n,{Z:function(){return $}});var t=r(67294),o=r(93470),a=r(94184),l=r.n(a),i=r(98787),s=r(45353),c=r(53124),d=r(54548),u=r(10274),h=r(14747),p=r(45503),f=r(91945);let m=e=>{let{paddingXXS:n,lineWidth:r,tagPaddingHorizontal:t,componentCls:o,calc:a}=e,l=a(t).sub(r).equal(),i=a(n).sub(r).equal();return{[o]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:l,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,d.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:i,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:l}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},g=e=>{let{lineWidth:n,fontSizeIcon:r,calc:t}=e,o=e.fontSizeSM;return(0,p.TS)(e,{tagFontSize:o,tagLineHeight:(0,d.bf)(t(e.lineHeightSM).mul(o).equal()),tagIconSize:t(r).sub(t(n).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},b=e=>({defaultBg:new u.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var v=(0,f.I$)("Tag",e=>m(g(e)),b),x=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>n.indexOf(t)&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)0>n.indexOf(t[o])&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let j=t.forwardRef((e,n)=>{let{prefixCls:r,style:o,className:a,checked:i,onChange:s,onClick:d}=e,u=x(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:h,tag:p}=t.useContext(c.E_),f=h("tag",r),[m,g,b]=v(f),j=l()(f,`${f}-checkable`,{[`${f}-checkable-checked`]:i},null==p?void 0:p.className,a,g,b);return m(t.createElement("span",Object.assign({},u,{ref:n,style:Object.assign(Object.assign({},o),null==p?void 0:p.style),className:j,onClick:e=>{null==s||s(!i),null==d||d(e)}})))});var y=r(98719);let C=e=>(0,y.Z)(e,(n,r)=>{let{textColor:t,lightBorderColor:o,lightColor:a,darkColor:l}=r;return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:t,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var _=(0,f.bk)(["Tag","preset"],e=>C(g(e)),b);let k=(e,n,r)=>{let t="string"!=typeof r?r:r.charAt(0).toUpperCase()+r.slice(1);return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:e[`color${r}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var w=(0,f.bk)(["Tag","status"],e=>{let n=g(e);return[k(n,"success","Success"),k(n,"processing","Info"),k(n,"error","Error"),k(n,"warning","Warning")]},b),N=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>n.indexOf(t)&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)0>n.indexOf(t[o])&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let S=t.forwardRef((e,n)=>{let{prefixCls:r,className:a,rootClassName:d,style:u,children:h,icon:p,color:f,onClose:m,closeIcon:g,closable:b,bordered:x=!0}=e,j=N(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:y,direction:C,tag:k}=t.useContext(c.E_),[S,$]=t.useState(!0);t.useEffect(()=>{"visible"in j&&$(j.visible)},[j.visible]);let Z=(0,i.o2)(f),O=(0,i.yT)(f),T=Z||O,L=Object.assign(Object.assign({backgroundColor:f&&!T?f:void 0},null==k?void 0:k.style),u),P=y("tag",r),[E,I,B]=v(P),F=l()(P,null==k?void 0:k.className,{[`${P}-${f}`]:T,[`${P}-has-color`]:f&&!T,[`${P}-hidden`]:!S,[`${P}-rtl`]:"rtl"===C,[`${P}-borderless`]:!x},a,d,I,B),H=e=>{e.stopPropagation(),null==m||m(e),e.defaultPrevented||$(!1)},[,z]=function(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.createElement(o.Z,null),l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("boolean"==typeof e?!e:void 0===n?!l:!1===n||null===n)return[!1,null];let i="boolean"==typeof n||null==n?a:n;return[!0,r?r(i):i]}(b,g,e=>null===e?t.createElement(o.Z,{className:`${P}-close-icon`,onClick:H}):t.createElement("span",{className:`${P}-close-icon`,onClick:H},e),null,!1),A="function"==typeof j.onClick||h&&"a"===h.type,R=p||null,D=R?t.createElement(t.Fragment,null,R,h&&t.createElement("span",null,h)):h,q=t.createElement("span",Object.assign({},j,{ref:n,className:F,style:L}),D,z,Z&&t.createElement(_,{key:"preset",prefixCls:P}),O&&t.createElement(w,{key:"status",prefixCls:P}));return E(A?t.createElement(s.Z,{component:"Tag"},q):q)});S.CheckableTag=j;var $=S},19232:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return H}});var t=r(67294),o=r(9008),a=r.n(o),l=r(76315),i=r(79977),s=r(1566),c=r.n(s),d=r(55147),u=r(19668),h=r(62079),p=r.n(h),f=r(52020),m=r.n(f),g=r(73324),b=r.n(g),v=r(88546),x=r.n(v),j=r(99595),y=r.n(j),C=r(66775),_=r.n(C),k=r(2201),w=r.n(k),N=r(57445),S=r.n(N),$=r(44845),Z=r(85893),O=r(11151);function T(e,n){var r=p()(e);if(m()){var t=m()(e);n&&(t=b()(t).call(t,function(n){return x()(e,n).enumerable})),r.push.apply(r,t)}return r}function L(e){for(var n=1;n<arguments.length;n++){var r,t,o=null!=arguments[n]?arguments[n]:{};n%2?y()(r=T(Object(o),!0)).call(r,function(n){(0,$.Z)(e,n,o[n])}):_()?w()(e,_()(o)):y()(t=T(Object(o))).call(t,function(n){S()(e,n,x()(o,n))})}return e}function P(e){var n=L(L({code:"code",pre:"pre"},(0,O.a)()),e.components);return(0,Z.jsx)(n.pre,{children:(0,Z.jsx)(n.code,{className:"language-dart",children:"import 'dart:io';\nimport 'dart:typed_data';\nimport 'package:dio/dio.dart';\n\nFuture<Response<dynamic>> requestUploadFile(filePath) async {\n  Dio dio = Dio();\n  File file = File(filePath);\n  Uint8List bytes = await file.readAsBytes();\n  Stream<List<int>> stream = MultipartFile.fromBytes(bytes).finalize();\n\n  Response<dynamic> response = await dio.put(\n    'https://xxxxxx.com/upload',\n    data: stream,\n    options: Options(\n      contentType: mimeType,\n      headers: {\n        'content-length': (await file.length()).toString()\n      }\n    )\n  );\n\n  return response;\n}\n"})})}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=L(L({},(0,O.a)()),e.components).wrapper;return n?(0,Z.jsx)(n,L(L({},e),{},{children:(0,Z.jsx)(P,L({},e))})):P(e)}var I=l.Z.Title,B=l.Z.Paragraph,F=function(){return(0,Z.jsxs)(d.Z,{children:[(0,Z.jsx)(I,{children:"使用dio上传文件"}),(0,Z.jsxs)(B,{children:["在Flutter开发中，使用",(0,Z.jsx)(u.Z,{href:"https://github.com/flutterchina/dio",children:"dio"}),"实现上传文件的功能："]}),(0,Z.jsx)(E,{}),(0,Z.jsxs)(B,{children:["由于dio会将请求转换成",(0,Z.jsx)(i.Z,{className:c().tag,children:"String"}),"类型，所以需要将",(0,Z.jsx)(i.Z,{className:c().tag,children:"Uint8List"}),"类型转换成",(0,Z.jsx)(i.Z,{className:c().tag,children:"Stream<List<int>>"}),"类型。具体请参考dio的",(0,Z.jsx)(u.Z,{href:"https://github.com/flutterchina/dio/issues/485#issuecomment-552845924",children:"issues"}),"，这块算是一个小坑吧。"]})]})};function H(e){return(0,Z.jsxs)(t.Fragment,{children:[(0,Z.jsxs)(a(),{children:[(0,Z.jsx)("title",{children:"使用dio上传文件"}),(0,Z.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart, dio"}),(0,Z.jsx)("meta",{name:"description",content:"使用dio上传文件"})]}),(0,Z.jsx)(F,{})]})}},19668:function(e,n,r){"use strict";var t=r(85893);n.Z=function(e){var n=e.href,r=e.className,o=e.children;return(0,t.jsx)("a",{className:r,href:n,target:"_blank",rel:"noopener noreferrer",children:o})}},39243:function(e,n,r){"use strict";var t=r(19623),o=r(73935),a=r(11163),l=r(81860),i=r(18610),s=r(75162),c=r(6171),d=r(76467),u=r(63791),h=r.n(u),p=r(85893),f=l.Z.BackTop;n.Z=function(e){var n=(0,a.useRouter)();return[(0,p.jsxs)("div",{className:h().main,children:[e.goBack?(0,p.jsx)("div",{className:"mb-[16px] text-right",children:(0,p.jsxs)(i.ZP,{onClick:function(e){n.push("/")},children:[(0,p.jsx)(c.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==e?void 0:e.children]},"main"),(0,p.jsx)(d.default,{children:null!=e&&e.goToTop&&("undefined"==typeof document?"undefined":(0,t.Z)(document))==="object"?(0,o.createPortal)((0,p.jsx)(f,{type:"primary",icon:(0,p.jsx)(s.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}},31725:function(e,n,r){"use strict";r(64043);var t=r(88946),o=r.n(t),a=r(81290),l=r.n(a),i=r(41664),s=r.n(i),c=r(21612),d=r(78957),u=r(83062),h=r(67337),p=r(32958),f=r.n(p),m=r(96808),g=r(19668),b=r(85893),v=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}],x=["github.io","vercel.app"],j=o()(v).call(v,function(e,n){return(0,b.jsx)("li",{className:f().navListItem,children:(0,b.jsx)(s(),{href:e.href,children:e.title})},e.href)});n.Z=function(e){return(0,b.jsx)(c.Z.Header,{className:f().antdHeader,children:(0,b.jsxs)("div",{className:f().header,children:[(0,b.jsx)("nav",{className:f().headerLeft,children:(0,b.jsx)("ul",{className:f().navList,children:j})}),(0,b.jsx)("div",{className:f().headerRight,children:(0,b.jsxs)(d.Z,{size:16,children:[(0,b.jsx)(u.Z,{title:"切换网站地址",children:(0,b.jsx)("a",{className:f().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(e){var n=window.location,r=n.pathname,t=n.hostname,o=/github\.io/.test(t);window.location.href=new(l())(r,"https://duan602728596.".concat(x[o?1:0],"/"))},children:(0,b.jsx)(h.Z,{className:f().switchAddressIcon})})}),(0,b.jsx)(g.Z,{className:f().githubLink,href:"https://github.com/duan602728596",children:(0,b.jsx)(m.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},96808:function(e,n,r){"use strict";var t=r(85893);n.Z=function(e){var n=e.className,r=e.imageClassName,o=e.avifSrc,a=e.webpSrc,l=e.src,i=e.alt;return(0,t.jsxs)("picture",{className:n,children:[o&&(0,t.jsx)("source",{srcSet:o,type:"image/avif"}),a&&(0,t.jsx)("source",{srcSet:a,type:"image/webp"}),(0,t.jsx)("img",{className:r,src:l,alt:i})]})}},55147:function(e,n,r){"use strict";var t=r(67294),o=r(31725),a=r(39243),l=r(85893);n.Z=function(e){return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(o.Z,{}),(0,l.jsx)(a.Z,{goToTop:!0,goBack:!0,children:e.children})]})}},17158:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/dio-upload-file",function(){return r(19232)}])},63791:function(e){e.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},32958:function(e){e.exports={antdHeader:"nav_antdHeader__eCvl0",header:"nav_header__y1mlw",headerLeft:"nav_headerLeft__PrT7_",headerRight:"nav_headerRight__JfqYP",navList:"nav_navList__3HXot",navListItem:"nav_navListItem__hpAdz",switchAddress:"nav_switchAddress__sVzqD",githubLink:"nav_githubLink__BDzSl",switchAddressIcon:"nav_switchAddressIcon__KLxGG"}},1566:function(e){e.exports={tag:"dioUploadFile_tag__lLjR9"}}},function(e){e.O(0,[8610,1447,4530,9774,2888,179],function(){return e(e.s=17158)}),_N_E=e.O()}]);