(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{79977:function(e,o,n){"use strict";n.d(o,{Z:function(){return w}});var t=n(67294),r=n(97937),l=n(93967),i=n.n(l),a=n(98787),s=function(e,o,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.createElement(r.Z,null),i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("boolean"==typeof e?!e:void 0===o?!i:!1===o||null===o)return[!1,null];let a="boolean"==typeof o||null==o?l:o;return[!0,n?n(a):a]},c=n(45353),d=n(53124),u=n(54548),p=n(10274),g=n(14747),f=n(45503),m=n(91945);let h=e=>{let{paddingXXS:o,lineWidth:n,tagPaddingHorizontal:t,componentCls:r,calc:l}=e,i=l(t).sub(n).equal(),a=l(o).sub(n).equal();return{[r]:Object.assign(Object.assign({},(0,g.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,u.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:a,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${r}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},b=e=>{let{lineWidth:o,fontSizeIcon:n,calc:t}=e,r=e.fontSizeSM;return(0,f.TS)(e,{tagFontSize:r,tagLineHeight:(0,u.bf)(t(e.lineHeightSM).mul(r).equal()),tagIconSize:t(n).sub(t(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},x=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var y=(0,m.I$)("Tag",e=>h(b(e)),x),C=function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>o.indexOf(t)&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)0>o.indexOf(t[r])&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(n[t[r]]=e[t[r]]);return n};let j=t.forwardRef((e,o)=>{let{prefixCls:n,style:r,className:l,checked:a,onChange:s,onClick:c}=e,u=C(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:g}=t.useContext(d.E_),f=p("tag",n),[m,h,b]=y(f),x=i()(f,`${f}-checkable`,{[`${f}-checkable-checked`]:a},null==g?void 0:g.className,l,h,b);return m(t.createElement("span",Object.assign({},u,{ref:o,style:Object.assign(Object.assign({},r),null==g?void 0:g.style),className:x,onClick:e=>{null==s||s(!a),null==c||c(e)}})))});var v=n(98719);let k=e=>(0,v.Z)(e,(o,n)=>{let{textColor:t,lightBorderColor:r,lightColor:l,darkColor:i}=n;return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:t,background:l,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var $=(0,m.bk)(["Tag","preset"],e=>k(b(e)),x);let T=(e,o,n)=>{let t="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:e[`color${n}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var S=(0,m.bk)(["Tag","status"],e=>{let o=b(e);return[T(o,"success","Success"),T(o,"processing","Info"),T(o,"error","Error"),T(o,"warning","Warning")]},x),O=function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>o.indexOf(t)&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)0>o.indexOf(t[r])&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(n[t[r]]=e[t[r]]);return n};let _=t.forwardRef((e,o)=>{let{prefixCls:n,className:l,rootClassName:u,style:p,children:g,icon:f,color:m,onClose:h,closeIcon:b,closable:x,bordered:C=!0}=e,j=O(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:v,direction:k,tag:T}=t.useContext(d.E_),[_,w]=t.useState(!0);t.useEffect(()=>{"visible"in j&&w(j.visible)},[j.visible]);let E=(0,a.o2)(m),N=(0,a.yT)(m),P=E||N,Z=Object.assign(Object.assign({backgroundColor:m&&!P?m:void 0},null==T?void 0:T.style),p),B=v("tag",n),[F,I,L]=y(B),z=i()(B,null==T?void 0:T.className,{[`${B}-${m}`]:P,[`${B}-has-color`]:m&&!P,[`${B}-hidden`]:!_,[`${B}-rtl`]:"rtl"===k,[`${B}-borderless`]:!C},l,u,I,L),H=e=>{e.stopPropagation(),null==h||h(e),e.defaultPrevented||w(!1)},[,R]=s(x,null!=b?b:null==T?void 0:T.closeIcon,e=>null===e?t.createElement(r.Z,{className:`${B}-close-icon`,onClick:H}):t.createElement("span",{className:`${B}-close-icon`,onClick:H},e),null,!1),D="function"==typeof j.onClick||g&&"a"===g.type,M=f||null,q=M?t.createElement(t.Fragment,null,M,g&&t.createElement("span",null,g)):g,U=t.createElement("span",Object.assign({},j,{ref:o,className:z,style:Z}),q,R,E&&t.createElement($,{key:"preset",prefixCls:B}),N&&t.createElement(S,{key:"status",prefixCls:B}));return F(D?t.createElement(c.Z,{component:"Tag"},U):U)});_.CheckableTag=j;var w=_},17158:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/dio-upload-file",function(){return n(94357)}])},94357:function(e,o,n){"use strict";n.r(o),n.d(o,{default:function(){return y}});var t=n(85893),r=n(67294),l=n(9008),i=n.n(l),a=n(76315),s=n(79977),c=n(1566),d=n.n(c),u=n(30673),p=n(39182),g=n(11151);function f(e){let o={code:"code",pre:"pre",...(0,g.a)(),...e.components};return(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-dart",children:"import 'dart:io';\nimport 'dart:typed_data';\nimport 'package:dio/dio.dart';\n\nFuture<Response<dynamic>> requestUploadFile(filePath) async {\n  Dio dio = Dio();\n  File file = File(filePath);\n  Uint8List bytes = await file.readAsBytes();\n  Stream<List<int>> stream = MultipartFile.fromBytes(bytes).finalize();\n\n  Response<dynamic> response = await dio.put(\n    'https://xxxxxx.com/upload',\n    data: stream,\n    options: Options(\n      contentType: mimeType,\n      headers: {\n        'content-length': (await file.length()).toString()\n      }\n    )\n  );\n\n  return response;\n}\n"})})}function m(e={}){let{wrapper:o}={...(0,g.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(f,{...e})}):f(e)}let{Title:h,Paragraph:b}=a.default;var x=function(){return(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(h,{children:"使用dio上传文件"}),(0,t.jsxs)(b,{children:["在Flutter开发中，使用",(0,t.jsx)(p.Z,{href:"https://github.com/flutterchina/dio",children:"dio"}),"实现上传文件的功能："]}),(0,t.jsx)(m,{}),(0,t.jsxs)(b,{children:["由于dio会将请求转换成",(0,t.jsx)(s.Z,{className:d().tag,children:"String"}),"类型，所以需要将",(0,t.jsx)(s.Z,{className:d().tag,children:"Uint8List"}),"类型转换成",(0,t.jsx)(s.Z,{className:d().tag,children:"Stream<List<int>>"}),"类型。具体请参考dio的",(0,t.jsx)(p.Z,{href:"https://github.com/flutterchina/dio/issues/485#issuecomment-552845924",children:"issues"}),"，这块算是一个小坑吧。"]})]})};function y(e){return(0,t.jsxs)(r.Fragment,{children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"使用dio上传文件"}),(0,t.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart, dio"}),(0,t.jsx)("meta",{name:"description",content:"使用dio上传文件"})]}),(0,t.jsx)(x,{})]})}},99388:function(e,o,n){"use strict";var t=n(85893),r=n(73935),l=n(45697),i=n.n(l),a=n(39332),s=n(81860),c=n(10932),d=n(75162),u=n(6171),p=n(76467),g=n(63791),f=n.n(g);let{BackTop:m}=s.default;function h(e){let o=(0,a.useRouter)();return[(0,t.jsxs)("div",{className:f().main,children:[e.goBack?(0,t.jsx)("div",{className:"mb-[16px] text-right",children:(0,t.jsxs)(c.ZP,{onClick:function(e){o.push("/")},children:[(0,t.jsx)(u.Z,{className:"mr-[6px]"}),"返回"]})}):null,e?.children]},"main"),e?.goToTop?(0,t.jsx)(p.default,{children:"object"==typeof document?(0,r.createPortal)((0,t.jsx)(m,{type:"primary",icon:(0,t.jsx)(d.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop"):null]}h.propTypes={children:i().node,goToTop:i().bool,goBack:i().bool},o.Z=h},30673:function(e,o,n){"use strict";var t=n(85893),r=n(45697),l=n.n(r),i=n(99388);function a(e){return(0,t.jsx)(i.Z,{goToTop:!0,goBack:!0,children:e.children})}a.propTypes={children:l().node},o.Z=a},63791:function(e){e.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},1566:function(e){e.exports={tag:"dioUploadFile_tag__lLjR9"}}},function(e){e.O(0,[932,416,2888,9774,179],function(){return e(e.s=17158)}),_N_E=e.O()}]);