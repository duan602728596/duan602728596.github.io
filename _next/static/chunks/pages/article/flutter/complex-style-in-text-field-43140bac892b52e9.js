(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4909],{46649:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/complex-style-in-text-field",function(){return e(49739)}])},49739:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return j}});var i=e(85893),l=e(67294),r=e(9008),o=e.n(r),a=e(66252),s=e(26219),x=e(78046),d=e(11151);function c(n){let t={code:"code",pre:"pre",...(0,d.a)(),...n.components};return(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\n\n/* 保证输入框tag高亮的控制器 */\nclass CodeHighlightingController extends TextEditingController {\n  /// 代码高亮\n  /// @param { String } text: 文字\n  List<TextSpan> codeHighlighting(BuildContext context, String text) {\n    List<TextSpan> list = [];\n    List<int> tagIndex = [];\n    int textLength = text.length;\n\n    // 获取\"#\"的index\n    for (int i = 0; i < textLength; i++) {\n      if (text[i] == '#') {\n        tagIndex.add(tagIndex.length % 2 == 0 ? i : (i + 1));\n      }\n    }\n\n    // 奇数时删除数组最后一位，保证区间的完整\n    if (tagIndex.length % 2 != 0) {\n      tagIndex.removeLast();\n    }\n\n    if (tagIndex.length == 0) {\n      // 没有tag，不需要处理\n      list.add(TextSpan(text: text, style: TextStyle(color: Colors.black)));\n    } else {\n      // 处理tag第一位\n      if (tagIndex[0] != 0) {\n        list.add(TextSpan(\n          text: text.substring(0, tagIndex[0]),\n          style: TextStyle(color: Colors.black)\n        ));\n      }\n\n      for (int i = 0; i < tagIndex.length; i++) {\n        int startIndex = tagIndex[i];\n        int endIndex = i == (tagIndex.length - 1) ? textLength : tagIndex[i + 1];\n\n        if (startIndex != endIndex) {\n          bool isLight = i % 2 == 0;\n          String tagText = text.substring(startIndex, endIndex);\n\n          if (tagText != '') {\n            String componentText = text.substring(startIndex, endIndex);\n\n            if (isLight) {\n              list.add(TextSpan(\n                text: componentText,\n                style: TextStyle(color: Colors.blue)\n              ));\n            } else {\n              list.add(TextSpan(\n                text: componentText,\n                style: TextStyle(color: Colors.black)\n              ));\n            }\n          }\n        }\n      }\n    }\n\n    return list;\n  }\n\n  @override\n  TextSpan buildTextSpan({\n    required BuildContext context,\n    required bool withComposing,\n    TextStyle? style\n  }) {\n    return TextSpan(children: codeHighlighting(context, text));\n  }\n}\n"})})}function g(n={}){let{wrapper:t}={...(0,d.a)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}function u(n){let t={code:"code",pre:"pre",...(0,d.a)(),...n.components};return(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"import 'package:flutter/material.dart';\nimport './code_highlighting_controller.dart';\n\nfinal CodeHighlightingController _controller = CodeHighlightingController();\n\nclass Form extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return TextField(\n      controller: _controller,\n      autofocus: true,\n      minLines: 5,\n      maxLines: null,\n      keyboardType: TextInputType.multiline,\n      textInputAction: TextInputAction.newline,\n      decoration: InputDecoration.collapsed(hintText: '请输入...'),\n    );\n  }\n}\n"})})}function p(n={}){let{wrapper:t}={...(0,d.a)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(u,{...n})}):u(n)}let{Title:h,Paragraph:m,Text:f}=a.default;var T=function(){return(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(h,{children:"在TextField中实现复杂的样式"}),(0,i.jsx)(m,{children:"在Flutter开发中，如果想要用TextField实现复杂的样式，比如："}),(0,i.jsx)(x.Z,{className:"block m-[16px]",imageClassName:"block my-0 mx-auto",avifSrc:"/images/complex-style-in-text-field/tangshi.avif",webpSrc:"/images/complex-style-in-text-field/tangshi.webp",src:"/images/complex-style-in-text-field/tangshi.png",alt:"Flutter开发的App的截图"}),(0,i.jsxs)(m,{children:["两个",(0,i.jsx)(f,{strong:!0,children:"#"}),"之间被识别为tag，高亮为蓝色。"]}),(0,i.jsxs)(m,{children:["为了实现这样的效果，我们需要扩展",(0,i.jsx)(f,{strong:!0,children:"TextEditingController"}),"："]}),(0,i.jsx)(g,{}),(0,i.jsx)(m,{children:"之后用它来创建TextField的controller："}),(0,i.jsx)(p,{})]})};function j(n){return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"在TextField中实现复杂的样式"}),(0,i.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart"}),(0,i.jsx)("meta",{name:"description",content:"在TextField中实现复杂的样式"})]}),(0,i.jsx)(T,{})]})}},94914:function(n,t,e){"use strict";var i=e(85893),l=e(73935),r=e(39332),o=e(29155),a=e(73991),s=e(70612),x=e(30448),d=e(76467),c=e(1294),g=e.n(c);let{BackTop:u}=o.default;t.Z=function(n){let t=(0,r.useRouter)();return[(0,i.jsxs)("div",{className:g().main,children:[n.goBack?(0,i.jsx)("div",{className:"mb-[16px] text-right",children:(0,i.jsxs)(a.ZP,{onClick:function(n){t.push("/")},children:[(0,i.jsx)(x.Z,{className:"mr-[6px]"}),"返回"]})}):null,n?.children]},"main"),n?.goToTop?(0,i.jsx)(d.default,{children:"object"==typeof document?(0,l.createPortal)((0,i.jsx)(u,{type:"primary",icon:(0,i.jsx)(s.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop"):null]}},26219:function(n,t,e){"use strict";var i=e(85893),l=e(66252),r=e(94914);t.Z=function(n){return(0,i.jsx)(r.Z,{goToTop:!0,goBack:!0,children:(0,i.jsx)(l.default,{children:n.children})})}},1294:function(n){n.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}}},function(n){n.O(0,[3991,5361,2888,9774,179],function(){return n(n.s=46649)}),_N_E=n.O()}]);