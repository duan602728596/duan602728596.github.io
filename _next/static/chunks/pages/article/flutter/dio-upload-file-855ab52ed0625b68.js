(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8196],{56481:function(e,r,n){"use strict";n.d(r,{Z:function(){return y}});var t=n(84481),o=n(94184),a=n.n(o),l=n(67294),i=n(98787),s=n(45353),c=n(53124),d=n(14747),u=n(98719),h=n(67968),p=n(45503);let f=(e,r,n)=>{let t=function(e){if("string"!=typeof e)return e;let r=e.charAt(0).toUpperCase()+e.slice(1);return r}(n);return{[`${e.componentCls}-${r}`]:{color:e[`color${n}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},g=e=>(0,u.Z)(e,(r,n)=>{let{textColor:t,lightBorderColor:o,lightColor:a,darkColor:l}=n;return{[`${e.componentCls}-${r}`]:{color:t,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),m=e=>{let{paddingXXS:r,lineWidth:n,tagPaddingHorizontal:t,componentCls:o}=e,a=t-n;return{[o]:Object.assign(Object.assign({},(0,d.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:r-n,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:a}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}};var b=(0,h.Z)("Tag",e=>{let{lineWidth:r,fontSizeIcon:n}=e,t=e.fontSizeSM,o=`${e.lineHeightSM*t}px`,a=(0,p.TS)(e,{tagFontSize:t,tagLineHeight:o,tagIconSize:n-2*r,tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary});return[m(a),g(a),f(a,"success","Success"),f(a,"processing","Info"),f(a,"error","Error"),f(a,"warning","Warning")]},e=>({defaultBg:e.colorFillQuaternary,defaultColor:e.colorText})),x=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>r.indexOf(t)&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)0>r.indexOf(t[o])&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n},v=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>r.indexOf(t)&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)0>r.indexOf(t[o])&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};let j=l.forwardRef((e,r)=>{let{prefixCls:n,className:o,rootClassName:d,style:u,children:h,icon:p,color:f,onClose:g,closeIcon:m,closable:x,bordered:j=!0}=e,y=v(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:_,direction:k,tag:C}=l.useContext(c.E_),[w,S]=l.useState(!0);l.useEffect(()=>{"visible"in y&&S(y.visible)},[y.visible]);let N=(0,i.o2)(f)||(0,i.yT)(f),$=Object.assign(Object.assign({backgroundColor:f&&!N?f:void 0},null==C?void 0:C.style),u),T=_("tag",n),[Z,O]=b(T),P=a()(T,null==C?void 0:C.className,{[`${T}-${f}`]:N,[`${T}-has-color`]:f&&!N,[`${T}-hidden`]:!w,[`${T}-rtl`]:"rtl"===k,[`${T}-borderless`]:!j},o,d,O),L=e=>{e.stopPropagation(),null==g||g(e),e.defaultPrevented||S(!1)},[,E]=function(e,r,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.createElement(t.Z,null),a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i="boolean"==typeof e?e:void 0===r?!!a:!1!==r&&null!==r;if(!i)return[!1,null];let s="boolean"==typeof r||null==r?o:r;return[!0,n?n(s):s]}(x,m,e=>null===e?l.createElement(t.Z,{className:`${T}-close-icon`,onClick:L}):l.createElement("span",{className:`${T}-close-icon`,onClick:L},e),null,!1),I="function"==typeof y.onClick||h&&"a"===h.type,B=p||null,F=B?l.createElement(l.Fragment,null,B,h&&l.createElement("span",null,h)):h,z=l.createElement("span",Object.assign({},y,{ref:r,className:P,style:$}),F,E);return Z(I?l.createElement(s.Z,{component:"Tag"},z):z)});j.CheckableTag=e=>{let{prefixCls:r,className:n,checked:t,onChange:o,onClick:i}=e,s=x(e,["prefixCls","className","checked","onChange","onClick"]),{getPrefixCls:d}=l.useContext(c.E_),u=d("tag",r),[h,p]=b(u),f=a()(u,`${u}-checkable`,{[`${u}-checkable-checked`]:t},n,p);return h(l.createElement("span",Object.assign({},s,{className:f,onClick:e=>{null==o||o(!t),null==i||i(e)}})))};var y=j},49032:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return j}});var t=n(67294),o=n(9008),a=n.n(o),l=n(48726),i=n(56481),s=n(95966),c=n.n(s),d=n(22410),u=n(67552),h=n.n(u),p=n(85893),f=n(11151);function g(e){var r=h()({pre:"pre",code:"code"},(0,f.ah)(),e.components);return(0,p.jsx)(r.pre,{children:(0,p.jsx)(r.code,{className:"language-dart",children:"import 'dart:io';\nimport 'dart:typed_data';\nimport 'package:dio/dio.dart';\n\nFuture<Response<dynamic>> requestUploadFile(filePath) async {\n  Dio dio = Dio();\n  File file = File(filePath);\n  Uint8List bytes = await file.readAsBytes();\n  Stream<List<int>> stream = MultipartFile.fromBytes(bytes).finalize();\n\n  Response<dynamic> response = await dio.put(\n    'https://xxxxxx.com/upload',\n    data: stream,\n    options: Options(\n      contentType: mimeType,\n      headers: {\n        'content-length': (await file.length()).toString()\n      }\n    )\n  );\n\n  return response;\n}\n"})})}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=h()({},(0,f.ah)(),e.components).wrapper;return r?(0,p.jsx)(r,h()({},e,{children:(0,p.jsx)(g,e)})):g(e)},b=l.Z.Title,x=l.Z.Paragraph,v=function(){return(0,p.jsxs)(d.Z,{children:[(0,p.jsx)(b,{children:"使用dio上传文件"}),(0,p.jsxs)(x,{children:["在Flutter开发中，使用",(0,p.jsx)("a",{href:"https://github.com/flutterchina/dio",target:"_blank",rel:"noopener noreferrer",children:"dio"}),"实现上传文件的功能："]}),(0,p.jsx)(m,{}),(0,p.jsxs)(x,{children:["由于dio会将请求转换成",(0,p.jsx)(i.Z,{className:c().tag,children:"String"}),"类型，所以需要将",(0,p.jsx)(i.Z,{className:c().tag,children:"Uint8List"}),"类型转换成",(0,p.jsx)(i.Z,{className:c().tag,children:"Stream<List<int>>"}),"类型。具体请参考dio的",(0,p.jsx)("a",{href:"https://github.com/flutterchina/dio/issues/485#issuecomment-552845924",target:"_blank",rel:"noopener noreferrer",children:"issues"}),"，这块算是一个小坑吧。"]})]})};function j(e){return(0,p.jsxs)(t.Fragment,{children:[(0,p.jsxs)(a(),{children:[(0,p.jsx)("title",{children:"使用dio上传文件"}),(0,p.jsx)("meta",{name:"keywords",content:"前端, Flutter, Dart, dio"}),(0,p.jsx)("meta",{name:"description",content:"使用dio上传文件"})]}),(0,p.jsx)(v,{})]})}},54892:function(e,r,n){"use strict";var t=n(19623),o=n(73935),a=n(11163),l=n(35846),i=n(97029),s=n(75162),c=n(37653),d=n(76467),u=n(3744),h=n.n(u),p=n(85893),f=l.Z.BackTop;r.Z=function(e){var r=(0,a.useRouter)();return[(0,p.jsxs)("div",{className:h().main,children:[e.goBack?(0,p.jsx)("div",{className:"mb-[16px] text-right",children:(0,p.jsxs)(i.ZP,{onClick:function(e){r.push("/")},children:[(0,p.jsx)(c.Z,{className:"mr-[6px]"}),"返回"]})}):null,null==e?void 0:e.children]},"main"),(0,p.jsx)(d.default,{children:null!=e&&e.goToTop&&("undefined"==typeof document?"undefined":(0,t.Z)(document))==="object"?(0,o.createPortal)((0,p.jsx)(f,{type:"primary",icon:(0,p.jsx)(s.Z,{}),title:"返回顶部",tabIndex:0,role:"button","aria-label":"返回顶部"}),document.body):null},"backTop")]}},34341:function(e,r,n){"use strict";n(74916);var t=n(88946),o=n.n(t),a=n(81290),l=n.n(a),i=n(41664),s=n.n(i),c=n(97183),d=n(42075),u=n(83062),h=n(67337),p=n(62139),f=n.n(p),g=n(30654),m=n(85893),b=[{href:"/",title:"文章"},{href:"/favorites",title:"收藏夹"},{href:"/project",title:"开源项目"}],x=["github.io","vercel.app"],v=o()(b).call(b,function(e,r){return(0,m.jsx)("li",{className:f().navListItem,children:(0,m.jsx)(s(),{href:e.href,children:e.title})},e.href)});r.Z=function(e){return(0,m.jsx)(c.Z.Header,{className:f().antdHeader,children:(0,m.jsxs)("div",{className:f().header,children:[(0,m.jsx)("nav",{className:f().headerLeft,children:(0,m.jsx)("ul",{className:f().navList,children:v})}),(0,m.jsx)("div",{className:f().headerRight,children:(0,m.jsxs)(d.Z,{size:16,children:[(0,m.jsx)(u.Z,{title:"切换网站地址",children:(0,m.jsx)("a",{className:f().switchAddress,role:"button",tabIndex:0,"aria-label":"切换网站地址",onClick:function(e){var r=window.location,n=r.pathname,t=r.hostname,o=/github\.io/.test(t);window.location.href=new(l())(n,"https://duan602728596.".concat(x[o?1:0],"/"))},children:(0,m.jsx)(h.Z,{className:f().switchAddressIcon})})}),(0,m.jsx)("a",{className:f().githubLink,href:"https://github.com/duan602728596",target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)(g.Z,{className:"block w-full h-full",imageClassName:"block w-full h-full",avifSrc:"/images/github.avif",webpSrc:"/images/github.webp",src:"/images/github.png",alt:"github"})})]})})]})})}},30654:function(e,r,n){"use strict";var t=n(85893);r.Z=function(e){var r=e.className,n=e.imageClassName,o=e.avifSrc,a=e.webpSrc,l=e.src,i=e.alt;return(0,t.jsxs)("picture",{className:r,children:[o&&(0,t.jsx)("source",{srcSet:o,type:"image/avif"}),a&&(0,t.jsx)("source",{srcSet:a,type:"image/webp"}),(0,t.jsx)("img",{className:n,src:l,alt:i})]})}},22410:function(e,r,n){"use strict";var t=n(67294),o=n(34341),a=n(54892),l=n(85893);r.Z=function(e){return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(o.Z,{}),(0,l.jsx)(a.Z,{goToTop:!0,goBack:!0,children:e.children})]})}},17158:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/flutter/dio-upload-file",function(){return n(49032)}])},3744:function(e){e.exports={main:"main_main__IZXSv",goToTop:"main_goToTop__Py8c8"}},62139:function(e){e.exports={antdHeader:"nav_antdHeader__eCvl0",header:"nav_header__y1mlw",headerLeft:"nav_headerLeft__PrT7_",headerRight:"nav_headerRight__JfqYP",navList:"nav_navList__3HXot",navListItem:"nav_navListItem__hpAdz",switchAddress:"nav_switchAddress__sVzqD",githubLink:"nav_githubLink__BDzSl",switchAddressIcon:"nav_switchAddressIcon__KLxGG"}},95966:function(e){e.exports={tag:"dioUploadFile_tag__lLjR9"}}},function(e){e.O(0,[3576,7467,9166,9774,2888,179],function(){return e(e.s=17158)}),_N_E=e.O()}]);